---
title: CAF:リソースの整合性の意思決定ガイド
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
ms.date: 02/11/2019
description: Azure の移行を計画する際のリソースの整合性について説明します。
author: rotycenh
ms.openlocfilehash: c2ff9a274692421e50775048586088134ff4c225
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58241096"
---
# <a name="caf-resource-consistency-decision-guide"></a><span data-ttu-id="22b1a-103">CAF:リソースの整合性の意思決定ガイド</span><span class="sxs-lookup"><span data-stu-id="22b1a-103">CAF: Resource consistency decision guide</span></span>

<span data-ttu-id="22b1a-104">Azure の[サブスクリプション設計](../subscriptions/overview.md)では、組織の構造、会計実務、ワークロードの要件に関連してクラウド資産をどのように編成するかを定義します。</span><span class="sxs-lookup"><span data-stu-id="22b1a-104">Azure [subscription design](../subscriptions/overview.md) defines how you organize your cloud assets in relation to your organization's structure, accounting practices, and workload requirements.</span></span> <span data-ttu-id="22b1a-105">このレベルの構造に加え、クラウド資産全体にわたって組織のガバナンス ポリシー要件に対応するために、サブスクリプション内のリソースを一貫して整理、デプロイ、管理する機能が必要です。</span><span class="sxs-lookup"><span data-stu-id="22b1a-105">In addition to this level of structure, addressing your organizational governance policy requirements across your cloud estate requires the ability to consistently organize, deploy, and manage resources within a subscription.</span></span>

![複雑さが最小から最大までのリソースの整合性オプションを表わした図 (対応するジャンプ リンクを下に掲載)](../../_images/discovery-guides/discovery-guide-resource-consistency.png)

<span data-ttu-id="22b1a-107">ジャンプ先:[基本的なグループ化](#basic-grouping) | [デプロイの整合性](#deployment-consistency) | [ポリシーの整合性](#policy-consistency) | [階層的な整合性](#hierarchical-consistency)  | [整合性の自動化](#automated-consistency)</span><span class="sxs-lookup"><span data-stu-id="22b1a-107">Jump to: [Basic grouping](#basic-grouping) | [Deployment consistency](#deployment-consistency) | [Policy consistency](#policy-consistency) | [Hierarchical consistency](#hierarchical-consistency) | [Automated consistency](#automated-consistency)</span></span>

<span data-ttu-id="22b1a-108">クラウド資産のリソース整合性要件のレベルに関する意思決定を左右する主な要因: 移行後のデジタル資産のサイズ、既存のサブスクリプション設計方法にうまく適合しないビジネスまたは環境の要件、リソースがデプロイされた後に時間の経過と共にガバナンスを適用する必要性。</span><span class="sxs-lookup"><span data-stu-id="22b1a-108">Decisions regarding the level of your cloud estate's resource consistency requirements are primarily driven by these factors: post-migration digital estate size, business or environmental requirements that don't fit neatly within your existing subscription design approaches, or the need to enforce governance over time after resources have been deployed.</span></span> 

<span data-ttu-id="22b1a-109">これらの要因の重要度が増すにつれて、クラウド ベースのリソースを一貫してデプロイ、グループ化、管理することの利点がより重要になります。</span><span class="sxs-lookup"><span data-stu-id="22b1a-109">As these factors increase in importance, the benefits of ensuring consistent deployment, grouping, and management of cloud-based resources becomes more important.</span></span> <span data-ttu-id="22b1a-110">増加する要件を満たすために、より高度なレベルのリソース整合性を実現するには、自動化、ツールの使用、整合性の適用により多くの作業が必要になり、その結果、変更管理と進捗管理に費やす時間が増えます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-110">Achieving more advanced levels of resource consistency to meet increasing requirements requires more effort spent in automation, tooling, and consistency enforcement, and this results in an more time spent on change management and tracking.</span></span>


## <a name="basic-grouping"></a><span data-ttu-id="22b1a-111">基本的なグループ化</span><span class="sxs-lookup"><span data-stu-id="22b1a-111">Basic grouping</span></span>

<span data-ttu-id="22b1a-112">Azure では、[リソース グループ](/azure/azure-resource-manager/resource-group-overview#resource-groups)はサブスクリプション内でリソースを論理的にグループ化するリソース編成のコア メカニズムです。</span><span class="sxs-lookup"><span data-stu-id="22b1a-112">In Azure, [resource groups](/azure/azure-resource-manager/resource-group-overview#resource-groups) are a core resource organization mechanism to logically group resources within a subscription.</span></span>

<span data-ttu-id="22b1a-113">リソース グループは、共通のライフ サイクル、またはポリシーやロールベースのアクセス制御 (RBAC) の要件などの共有管理の制約があるリソースのコンテナーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="22b1a-113">Resource groups act as containers for resources with a common lifecycle or shared management constraints such as policy or role-based access control (RBAC) requirements.</span></span> <span data-ttu-id="22b1a-114">リソース グループに別のリソース グループを入れ子にすることはできません。また、リソースは 1 つのリソース グループにのみ属することができます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-114">Resource groups can't be nested, and resources can only belong to one resource group.</span></span> <span data-ttu-id="22b1a-115">リソース グループのすべてのリソースに対して特定のアクションを適用できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-115">Some actions can act on all resources in a resource group.</span></span> <span data-ttu-id="22b1a-116">たとえば、リソース グループを削除すると、そのグループ内のすべてのリソースが削除されます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-116">For example, deleting a resource group removes all resources within that group.</span></span> <span data-ttu-id="22b1a-117">リソース グループを作成する際には一般的なパターンがあり、通常、2 つのカテゴリに分類されます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-117">There are common patterns when creating resource groups, commonly divided into two categories:</span></span>

- <span data-ttu-id="22b1a-118">従来型 IT ワークロード:ほとんどの場合、同じライフサイクル内の項目 (アプリケーションなど) でグループ化されます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-118">Traditional IT workloads: Most often grouped by items within the same lifecycle, such as an application.</span></span> <span data-ttu-id="22b1a-119">アプリケーションでグループ化すると、個々のアプリケーションの管理が可能になります。</span><span class="sxs-lookup"><span data-stu-id="22b1a-119">Grouping by application allows for individual application management.</span></span>
- <span data-ttu-id="22b1a-120">アジャイルの IT ワークロード:外部顧客向けのクラウド アプリケーションに焦点を当てます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-120">Agile IT workloads: Focus on external customer-facing cloud applications.</span></span> <span data-ttu-id="22b1a-121">多くの場合、こうしたリソース グループは、デプロイの機能レイヤー (Web 層、アプリケーション層など) と管理の機能レイヤーを反映します。</span><span class="sxs-lookup"><span data-stu-id="22b1a-121">These resource groups often reflect the functional layers of deployment (such as web tier or app tier) and management.</span></span>

## <a name="deployment-consistency"></a><span data-ttu-id="22b1a-122">デプロイの整合性</span><span class="sxs-lookup"><span data-stu-id="22b1a-122">Deployment consistency</span></span>

<span data-ttu-id="22b1a-123">基本的なリソース グループ化メカニズムの上に構築されている Azure プラットフォームは、テンプレートを使用して、クラウド環境にリソースをデプロイするためのシステムを提供します。</span><span class="sxs-lookup"><span data-stu-id="22b1a-123">Building on top of the base resource grouping mechanism, the Azure platform provides a system for using templates to deploy your resources to the cloud environment.</span></span> <span data-ttu-id="22b1a-124">ワークロードのデプロイ時、テンプレートを使用して一貫性のある組織と名前付け規則を作成し、リソースのデプロイと管理の設計におけるこれらの側面を強化できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-124">You can use templates to create consistent organization and naming conventions when deploying workloads, enforcing those aspects of your resource deployment and management design.</span></span>

<span data-ttu-id="22b1a-125">[Azure Resource Manager テンプレート](/azure/azure-resource-manager/resource-group-overview#template-deployment)を使用すると、事前に定義された構成とリソース グループの構造を使用して一貫した状態でリソースを繰り返しデプロイすることができます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-125">[Azure Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment) allow you to repeatedly deploy your resources in a consistent state using a predetermined configuration and resource group structure.</span></span> <span data-ttu-id="22b1a-126">Resource Manager テンプレートを使用して、デプロイの基礎として標準のセットを定義できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-126">Resource Manager templates help you define a set of standards as a basis for your deployments.</span></span>

<span data-ttu-id="22b1a-127">たとえば、サーバー間のトラフィックを分散するために、ロード バランサーと組み合わせた Web サーバーとして 2 つの仮想マシンを含む Web サーバー ワークロードをデプロイするための標準テンプレートを作成できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-127">For example, you can have a standard template for deploying a web server workload that contains two virtual machines as web servers combined with a load balancer to distribute traffic between the servers.</span></span> <span data-ttu-id="22b1a-128">この種類のワークロードが必要な場合はいつでも、このテンプレートを再利用して、関連するデプロイ名と IP アドレスを変更するだけで構造的に同一な一連の仮想マシンとロード バランサーを作成できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-128">You can then reuse this template to create structurally identical set of virtual machines and load balancer whenever this type of workload is needed, only changing the deployment name and IP addresses involved.</span></span>

<span data-ttu-id="22b1a-129">なお、プログラムでこれらのテンプレートをデプロイして、CI/CD システムと統合することもできます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-129">Note that you can also programmatically deploy these templates and integrate them with your CI/CD systems.</span></span>

## <a name="policy-consistency"></a><span data-ttu-id="22b1a-130">ポリシーの整合性</span><span class="sxs-lookup"><span data-stu-id="22b1a-130">Policy consistency</span></span>

<span data-ttu-id="22b1a-131">リソースが作成されるときにガバナンス ポリシーが確実に適用されるようにするために、リソース グループ設計の一部には、リソースをデプロイするときに共通の構成を使用することが含まれます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-131">To ensure that governance policies are applied when resources are created, part of resource grouping design involves using a common configuration when deploying resources.</span></span>

<span data-ttu-id="22b1a-132">リソース グループと標準化された Resource Manager テンプレートを組み合わせることで、デプロイに必要な設定の標準と、リソース グループまたはリソースそれぞれに適用される [Azure Policy](/azure/governance/policy/overview) ルールの標準を適用できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-132">By combining resource groups and standardized Resource Manager templates, you can enforce standards for what settings are required in a deployment and what [Azure Policy](/azure/governance/policy/overview) rules are applied to each resource group or resource.</span></span>

<span data-ttu-id="22b1a-133">たとえば、サブスクリプション内にデプロイされたすべての仮想マシンが、中央の IT チームによって管理されている共通のサブネットに接続するという要件があるとします。</span><span class="sxs-lookup"><span data-stu-id="22b1a-133">For example, you may have a requirement that all virtual machines deployed within your subscription connect to a common subnet managed by your central IT team.</span></span> <span data-ttu-id="22b1a-134">ワークロード VM をデプロイするための標準的なテンプレートを作成できます。このテンプレートにより、ワークロードの別のリソース グループが作成され、必要な VM がそこにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-134">You can create a standard template for deploying workload VMs which would create a separate resource group for the workload and deploy the required VMs there.</span></span> <span data-ttu-id="22b1a-135">このリソース グループには、共有サブネットに参加するリソース グループ内のネットワーク インターフェイスのみを許可するポリシー ルールがあります。</span><span class="sxs-lookup"><span data-stu-id="22b1a-135">This resource group would have a policy rule to only allow network interfaces within the resource group to be joined to the shared subnet.</span></span>

<span data-ttu-id="22b1a-136">クラウド デプロイ内でのポリシーの決定の適用に関する詳細については、[ポリシーの適用](../policy-enforcement/overview.md)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="22b1a-136">For a more in-depth discussion of enforcing your policy decisions within a cloud deployment, see [Policy enforcement](../policy-enforcement/overview.md).</span></span>

## <a name="hierarchical-consistency"></a><span data-ttu-id="22b1a-137">階層的な整合性</span><span class="sxs-lookup"><span data-stu-id="22b1a-137">Hierarchical consistency</span></span>

<span data-ttu-id="22b1a-138">リソース グループを使用すると、サブスクリプション内の組織内で追加の階層レベルをサポートでき、リソース グループ レベルで Azure Policy の規則およびアクセスの制御を適用できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-138">Resource groups allows you to support additional levels of hierarchy within your organization within the subscription, applying Azure Policy rules and access controls at a resource group level.</span></span> <span data-ttu-id="22b1a-139">ただし、クラウド資産のサイズ拡大に合わせて、Azure Enterprise Agreement の企業、部門、アカウント、サブスクリプションの各階層を使用してサポートできる、さらに複雑なサブスクリプション間ガバナンス要件のサポートが必要となる場合があります。</span><span class="sxs-lookup"><span data-stu-id="22b1a-139">However, As the size of your cloud estate grows, you may need to support more complicated cross-subscription governance requirements than can be supported using the Azure Enterprise Agreement's Enterprise/Department/Account/Subscription hierarchy.</span></span> 

<span data-ttu-id="22b1a-140">[Azure 管理グループ](../subscriptions/overview.md#management-groups)を使用すると、代替階層のサブスクリプションをエンタープライズ契約の構造によって設定された階層にグループ化して、サブスクリプションをより高度な組織構造に編成することができます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-140">[Azure management groups](../subscriptions/overview.md#management-groups) allows you to organization subscriptions into more sophisticated organizational structures by grouping subscriptions in an alternative hierarchy to that established by your enterprise agreement's structure.</span></span> <span data-ttu-id="22b1a-141">この代替階層では、複数のサブスクリプションと各サブスクリプションに含まれるリソースにまたがって、アクセス制御とポリシー実施のメカニズムを適用できます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-141">This alternate hierarchy allows you to apply access control and policy enforcement mechanisms across multiple subscriptions and the resources they contain.</span></span> <span data-ttu-id="22b1a-142">管理グループ階層を使用して、クラウド資産のサブスクリプションを運用やビジネス ガバナンスの要件に一致させることができます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-142">Management group hierarchies can be used to match your cloud estate's subscriptions with operations or business governance requirements.</span></span> 

## <a name="automated-consistency"></a><span data-ttu-id="22b1a-143">整合性の自動化</span><span class="sxs-lookup"><span data-stu-id="22b1a-143">Automated consistency</span></span>

<span data-ttu-id="22b1a-144">大規模なクラウド デプロイでは、グローバル ガバナンスがさらに重要で複雑になります。</span><span class="sxs-lookup"><span data-stu-id="22b1a-144">For large cloud deployments, global governance becomes both more important and more complex.</span></span> <span data-ttu-id="22b1a-145">リソースをデプロイするときにガバナンスの要件を自動的に適用し、強制することは、既存のデプロイの更新された要件を満たすことと同様に非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="22b1a-145">It is crucial to automatically apply and enforce governance requirements when deploying resources, as well as meet updated requirements for existing deployments.</span></span>

<span data-ttu-id="22b1a-146">[Azure Blueprints](/azure/governance/blueprints/overview) を使用すると、組織で Azure 内の大規模なクラウド資産のグローバル ガバナンスをサポートできます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-146">[Azure Blueprints](/azure/governance/blueprints/overview) enable organizations to support global governance of large cloud estates in Azure.</span></span> <span data-ttu-id="22b1a-147">Blueprints は、標準の Azure Resource Manager テンプレートで提供される機能を超えて、リソースのデプロイとポリシー規則の適用が可能な完全なデプロイ オーケストレーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="22b1a-147">Blueprints move beyond the capabilities provided by standard Azure Resource Manager templates to create complete deployment orchestrations capable of deploying resources and applying policy rules.</span></span> <span data-ttu-id="22b1a-148">Blueprints は、バージョン管理、ブループリントが使用されていたすべてのサブスクリプションに更新プログラムを適用する機能、およびデプロイされたサブスクリプションをロックしてリソースの不正な作成および変更を回避する機能をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="22b1a-148">Blueprints supports versioning, the ability to make apply updates to all subscriptions where the blueprint was used, and the ability to lock down deployed subscriptions to avoid the unauthorized creation and modification of resources.</span></span>

<span data-ttu-id="22b1a-149">これらの展開パッケージを使用すると、IT チームと開発チームが、変化する組織のポリシー要件に準拠する新しいワークロードとネットワーク資産を迅速にデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-149">These deployment packages allow IT and development teams to rapidly deploy new workloads and networking assets that comply with changing organizational policy requirements.</span></span> <span data-ttu-id="22b1a-150">Blueprints は CI/CD パイプラインに統合して、デプロイの更新時に、改訂されたガバナンス標準をそれらのデプロイに適用することもできます。</span><span class="sxs-lookup"><span data-stu-id="22b1a-150">Blueprints can also be integrated into CI/CD pipelines to apply revised governance standards to deployments as they are updated.</span></span>

## <a name="next-steps"></a><span data-ttu-id="22b1a-151">次の手順</span><span class="sxs-lookup"><span data-stu-id="22b1a-151">Next steps</span></span>

<span data-ttu-id="22b1a-152">リソースの名前付けとタグ付けを使用して、クラウド リソースをさらに編成して管理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="22b1a-152">Learn how resource naming and tagging are used to further organize and manage your cloud resources.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="22b1a-153">リソースの名前付けとタグ付け</span><span class="sxs-lookup"><span data-stu-id="22b1a-153">Resource naming and tagging</span></span>](../resource-tagging/overview.md)
