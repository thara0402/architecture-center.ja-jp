---
title: ジョブに最適なデータ ストアの使用
description: データに最適なストレージ技術とその使用方法を選択する
author: MikeWasson
layout: LandingPage
ms.openlocfilehash: ef9439f7a3766d13b498eac915e0f5afd23de4e2
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/14/2017
---
# <a name="use-the-best-data-store-for-the-job"></a>ジョブに最適なデータ ストアの使用

## <a name="pick-the-storage-technology-that-is-the-best-fit-for-your-data-and-how-it-will-be-used"></a>データに最適なストレージ技術とその使用方法を選択する

すべてのデータを大規模なリレーショナル SQL データベースに格納するだけ、というのは過去の話です。 リレーショナル データベースは ACID がリレーショナル データに対するトランザクションを保証するという前提において、非常に有用です。 ただし、これらにはいくつかの代償があります。

- クエリには、負荷の高い結合が必要となる場合があります。
- データは正規化され、定義済みのスキーマ (書き込み時のスキーマ) に準拠している必要があります。
- ロックの競合は、パフォーマンスに影響を及ぼす可能性があります。

すべての大規模なソリューションでは、多くの場合、1 つのデータ ストア テクノロジですべてのニーズが満たされることはありません。 リレーショナル データベースの代替には、キー/値ストア、ドキュメント データベース、検索エンジンのデータベース、時系列データベース、列指向データベース、およびグラフ データベースなどがあります。 それぞれに長所と短所があり、より自然に適合する、さまざまなデータの種類があります。 

たとえば、柔軟なスキーマが可能な Cosmos DB などのドキュメント データベースに製品カタログを格納することがあります。 この場合、製品の説明はそれぞれ自己完結型ドキュメントです。 カタログ全体のクエリの場合は、カタログのインデックスを作成し、Azure Search にインデックスを格納することがあります。 データが ACID 保証を必要とするため、製品一覧は SQL データベースに格納されます。

このデータに含まれるのは、永続化されたアプリケーション データだけではないことに注意してください。 アプリケーション ログ、イベント、メッセージ、およびキャッシュも含まれています。

## <a name="recommendations"></a>Recommendations

**リレーショナル データベースをすべてに対して使用しない**。 適切な場合は、その他のデータ ストアの使用を検討してください。 「[Choose the right data store (適切なデータ ストアの選択)][data-store-overview]」をご覧ください。

**多言語パーシステンスを受け入れる**。 すべての大規模なソリューションでは、多くの場合、1 つのデータ ストア テクノロジですべてのニーズが満たされることはありません。 

**データの種類を検討する**。 たとえば、トランザクション データを SQL に、JSON ドキュメントをドキュメント データベースに、テレメトリ データを時系列データベースに、アプリケーション ログを Elasticsearch に、および BLOB を Azure Blob Storage に格納します。

**一貫性より可用性を優先する**。 CAP 定理では、分散システムにおいては可用性と整合性とのトレードオフが避けられないことが示されています。 (CAP 定理のもう 1 つの要素であるネットワークの分断を完全に回避することは不可能です。)多くの場合、*"最終的な一貫性"*モデルを採用すると、より高い可用性を得ることができます。 

**開発チームのスキル セットを検討する**。 多言語パーシステンスを利用することにはメリットがありますが、過度になることがあります。 新しいデータ ストレージ テクノロジを採用するには、新しいスキルのセットが必要です。 開発チームは、テクノロジを最大限に活用する方法を理解する必要があります。 適切な使用パターン、クエリを最適化する方法、パフォーマンスの調整などを理解しなければなりません。 ストレージ テクノロジを検討するときに、このことを考慮してください。 

**補正トランザクションを使用する**。 多言語パーシステンスの副作用は、1 つのトランザクションが複数のストアにデータを書き込む可能性があるということです。 何かが失敗した場合は、既に完了しているすべての手順を元に戻す補正トランザクションを使用します。

**コンテキスト境界を確認する**。 "*コンテキスト境界*" は、ドメイン駆動型設計の用語です。 コンテキスト境界は、ドメイン モデルの周囲の明示的な境界であり、ドメインのどの部分にモデルが適用されるかを定義します。 コンテキスト境界がビジネス ドメインのサブドメインにマッピングされるのが理想です。 ご利用のシステムにおけるコンテキスト境界は、多言語パーシステンスを検討するのに適しています。 たとえば、"製品" が製品カタログのサブドメインと製品在庫のサブドメインの両方に表示されますが、多くの場合、これら 2 つのサブドメインには製品の格納、更新、および照会について異なる要件があります。

[data-store-overview]: ../technology-choices/data-store-overview.md