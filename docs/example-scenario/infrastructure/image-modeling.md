---
title: Azure でのデジタル イメージベースのモデリングの高速化
titleSuffix: Azure Example Scenarios
description: Avere と Agisoft PhotoScan を使用して Azure でデジタル イメージベースのモデリングを高速化する
author: adamboeglin
ms.date: 1/11/2019
ms.custom: cat-team
ms.openlocfilehash: 5aac3ea46ea864aba84544362c39d78f4055f512
ms.sourcegitcommit: ed736a0a1b080f6acf4877c8b906cd9b56e12bdf
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/28/2019
ms.locfileid: "55085856"
---
# <a name="accelerate-digital-image-based-modeling-on-azure"></a><span data-ttu-id="f9707-103">Azure でのデジタル イメージベースのモデリングの高速化</span><span class="sxs-lookup"><span data-stu-id="f9707-103">Accelerate digital image-based modeling on Azure</span></span>

<span data-ttu-id="f9707-104">このシナリオの例では、Azure のサービスとしてのインフラストラクチャ (IaaS) 上でイメージ ベースのモデリングを実行する必要がある組織向けにアーキテクチャと設計のガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="f9707-104">This example scenario provides architecture and design guidance for any organization that wants to perform image-based modeling on Azure infrastructure-as-a-service (IaaS).</span></span> <span data-ttu-id="f9707-105">このシナリオは処理時間を短縮するための高パフォーマンス ストレージを使用して Azure Virtual Machines (VM) 上でフォトグラメトリ ソフトウェアを実行するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="f9707-105">The scenario is designed for running photogrammetry software on Azure Virtual Machines (VMs) using high-performance storage that accelerates processing time.</span></span> <span data-ttu-id="f9707-106">環境は必要に応じてスケールアップとスケールダウンを行うことができ、パフォーマンスを損なわずに数 TB のストレージをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="f9707-106">The environment can be scaled up and down as needed and supports terabytes of storage without sacrificing performance.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="f9707-107">関連するユース ケース</span><span class="sxs-lookup"><span data-stu-id="f9707-107">Relevant use cases</span></span>

<span data-ttu-id="f9707-108">関連するユース ケース:</span><span class="sxs-lookup"><span data-stu-id="f9707-108">Relevant use cases include:</span></span>

- <span data-ttu-id="f9707-109">ビル、エンジニアリング構造物、および科学捜査上の事故シーンをモデリングおよび測定する。</span><span class="sxs-lookup"><span data-stu-id="f9707-109">Modeling and measuring buildings, engineering structures, and forensic accident scenes.</span></span>
- <span data-ttu-id="f9707-110">コンピューター ゲームやムービーの視覚効果を作成する。</span><span class="sxs-lookup"><span data-stu-id="f9707-110">Creating visual effects for computer games and movies.</span></span>
- <span data-ttu-id="f9707-111">デジタル画像を使用して、都市計画などの用途で、さまざまな規模のオブジェクトの測定値を直接生成する。</span><span class="sxs-lookup"><span data-stu-id="f9707-111">Using digital images to indirectly generate measurements of objects of various scales as in urban planning and other applications.</span></span>

## <a name="architecture"></a><span data-ttu-id="f9707-112">アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="f9707-112">Architecture</span></span>

<span data-ttu-id="f9707-113">この例では、Avere vFXT ストレージを活用した Agisoft PhotoScan フォトグラメトリ ソフトウェアの使用について説明します。</span><span class="sxs-lookup"><span data-stu-id="f9707-113">This example describes the use of Agisoft PhotoScan photogrammetry software backed by Avere vFXT storage.</span></span> <span data-ttu-id="f9707-114">PhotoScan は、地理情報システム (GIS) アプリケーション、文化遺産ドキュメント、ゲーム開発、および視覚効果プロダクションで広く普及していることから選択されました。</span><span class="sxs-lookup"><span data-stu-id="f9707-114">PhotoScan was chosen for its popularity in geographic information system (GIS) applications, cultural heritage documentation, game development, and visual effects production.</span></span> <span data-ttu-id="f9707-115">近距離フォトグラメトリと航空写真の両方に適しています。</span><span class="sxs-lookup"><span data-stu-id="f9707-115">It is suitable for both close-range photogrammetry and aerial photogrammetry.</span></span>

<span data-ttu-id="f9707-116">この記事で扱う概念は、インフラストラクチャとして管理されるスケジューラとワーカー ノードに基づくすべてのハイ パフォーマンス コンピューティング (HPC) ワークロードに適用されます。</span><span class="sxs-lookup"><span data-stu-id="f9707-116">The concepts in this article apply to any high-performance computing (HPC) workload based on a scheduler and worker nodes managed as infrastructure.</span></span>  <span data-ttu-id="f9707-117">このワークロードに対して、ベンチマーク テスト中に優れたパフォーマンスを示した Avere vFXT が選択されました。</span><span class="sxs-lookup"><span data-stu-id="f9707-117">For this workload, Avere vFXT was selected for its superior performance during benchmark tests.</span></span>  <span data-ttu-id="f9707-118">ただし、このシナリオでは他のストレージ ソリューションを使用できるように処理からストレージを切り離してあります (このドキュメントで後述する「[代替手段](#alternatives)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="f9707-118">However, the scenario decouples the storage from the processing so that other storage solutions can be used (see [alternatives](#alternatives) later in this document).</span></span>

<span data-ttu-id="f9707-119">このアーキテクチャには、Azure リソースへのアクセスを制御し、ドメイン ネーム システム (DNS) を通じて内部名前解決を提供する Active Directory ドメイン コントローラーも含まれています。</span><span class="sxs-lookup"><span data-stu-id="f9707-119">This architecture also includes Active Directory domain controllers to control access to Azure resources and provide internal name resolution through the Domain Name System (DNS).</span></span> <span data-ttu-id="f9707-120">ジャンプ ボックスから、ソリューションを実行する Windows と Linux VM に対する管理者アクセスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="f9707-120">Jump boxes provide administrator access to the Windows and Linux VMs that run the solution.</span></span>

![アーキテクチャ ダイアグラム](./media/architecture-image-modeling.png)

1. <span data-ttu-id="f9707-122">ユーザーは、PhotoScan にさまざまなイメージを送信します。</span><span class="sxs-lookup"><span data-stu-id="f9707-122">User submits a number of images to PhotoScan.</span></span>
2. <span data-ttu-id="f9707-123">PhotoScan スケジューラは、ヘッド ノードとして機能し、ユーザーのイメージの処理を指示する Windows VM で実行されます。</span><span class="sxs-lookup"><span data-stu-id="f9707-123">The PhotoScan Scheduler runs on a Windows VM that serves as the head node and directs processing of the user's images.</span></span>
3. <span data-ttu-id="f9707-124">PhotoScan は写真上の共通点を検索し、グラフィックス プロセッシング ユニット (GPU) を搭載した VM で実行されている PhotoScan 処理ノードを使用してジオメトリ (メッシュ) を構築します。</span><span class="sxs-lookup"><span data-stu-id="f9707-124">PhotoScan searches for common points on the photographs and constructs the geometry (mesh) using the PhotoScan processing nodes running on VMs with graphics processing units (GPUs).</span></span>
4. <span data-ttu-id="f9707-125">Avere vFXT は、ネットワーク ファイル システム バージョン 3 (NFSv3) に基づき、少なくとも 4 つの VM から構成されて、Azure での高パフォーマンス ストレージ ソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="f9707-125">Avere vFXT provides a high-performance storage solution on Azure based on Network File System version 3 (NFSv3) and comprised of at least four VMs.</span></span>
5. <span data-ttu-id="f9707-126">PhotoScan は、モデルをレンダリングします。</span><span class="sxs-lookup"><span data-stu-id="f9707-126">PhotoScan renders the model.</span></span>

### <a name="components"></a><span data-ttu-id="f9707-127">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="f9707-127">Components</span></span>

- <span data-ttu-id="f9707-128">[Agisoft PhotoScan](http://www.agisoft.com/):PhotoScan スケジューラは、Windows 2016 Server VM で実行され、処理ノードは、CentOS Linux 7.5 を実行している、GPU を搭載した 5 つの VM を使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-128">[Agisoft PhotoScan](http://www.agisoft.com/): The PhotoScan Scheduler runs on a Windows 2016 Server VM, and the processing nodes use five VMs with GPUs that run CentOS Linux 7.5.</span></span>
- <span data-ttu-id="f9707-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) は、大規模なデータセットの格納に最適化された、オブジェクト ストレージと従来のネットワーク接続ストレージ (NAS) を使用するファイル キャッシュ ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="f9707-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) is a file caching solution that uses object storage and traditional network-attached storage (NAS) to optimize storage of large datasets.</span></span> <span data-ttu-id="f9707-130">次の情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="f9707-130">It includes:</span></span>
  - <span data-ttu-id="f9707-131">Avere コントローラー。</span><span class="sxs-lookup"><span data-stu-id="f9707-131">Avere Controller.</span></span> <span data-ttu-id="f9707-132">この VM は、Avere vFXT クラスターをインストールするスクリプトを実行し、Ubuntu 18.04 LTS を実行します。</span><span class="sxs-lookup"><span data-stu-id="f9707-132">This VM executes the script that installs the Avere vFXT cluster and runs Ubuntu 18.04 LTS.</span></span> <span data-ttu-id="f9707-133">この VM は、クラスターのノード追加または削除と、クラスターの破棄のために後で使用できます。</span><span class="sxs-lookup"><span data-stu-id="f9707-133">The VM can be used later to add or remove cluster nodes and to destroy the cluster as well.</span></span>
  - <span data-ttu-id="f9707-134">vFXT クラスター。</span><span class="sxs-lookup"><span data-stu-id="f9707-134">vFXT cluster.</span></span> <span data-ttu-id="f9707-135">Avere OS 5.0.2.1 に基づく Avere vFXT ノードごとに 1 つ、少なくとも 3 つの VM が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f9707-135">At least three VMs are used, one for each of the Avere vFXT nodes based on Avere OS 5.0.2.1.</span></span> <span data-ttu-id="f9707-136">これらの VM は、Azure Blob Storage に接続されている vFXT クラスターを形成します。</span><span class="sxs-lookup"><span data-stu-id="f9707-136">These VMs form the vFXT cluster, which is attached to Azure Blob storage.</span></span>
- <span data-ttu-id="f9707-137">[Microsoft Active Directory ドメイン コントローラー](/windows/desktop/ad/active-directory-domain-services)は、ドメイン リソースへのホスト アクセスを許可して、DNS 名前解決を提供します。</span><span class="sxs-lookup"><span data-stu-id="f9707-137">[Microsoft Active Directory domain controllers](/windows/desktop/ad/active-directory-domain-services) allow the host access to domain resources and provide DNS name resolution.</span></span> <span data-ttu-id="f9707-138">Avere vFXT は多数の A レコードを追加します。たとえば、vFXT クラスター内の各 A レコードは各 Avere vFXT ノードの IP アドレスを指します。</span><span class="sxs-lookup"><span data-stu-id="f9707-138">Avere vFXT adds a number of A records—for example, each A record in a vFXT cluster points to the IP address of each Avere vFXT node.</span></span> <span data-ttu-id="f9707-139">このセットアップでは、すべての VM で vFXT へのアクセスにラウンドロビン パターンを使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-139">In this setup, all VMs use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="f9707-140">[他の VM](/azure/virtual-machines/) は、管理者はスケジューラと処理ノードにアクセスするために使用するジャンプ ボックスとして機能します。</span><span class="sxs-lookup"><span data-stu-id="f9707-140">[Other VMs](/azure/virtual-machines/) serve as jump boxes used by the administrator to access the scheduler and processing nodes.</span></span> <span data-ttu-id="f9707-141">Windows のジャンプ ボックスは、管理者がリモート デスクトップ プロトコル経由でヘッド ノードにアクセスするために必要です。</span><span class="sxs-lookup"><span data-stu-id="f9707-141">The Windows jumpbox is mandatory to allow the administrator to access the head node via remote desktop protocol.</span></span> <span data-ttu-id="f9707-142">2 番目のジャンプ ボックスは省略可能で、ワーカー ノードの管理用に Linux を実行します。</span><span class="sxs-lookup"><span data-stu-id="f9707-142">The second jumpbox is optional and runs Linux for administration of the worker nodes.</span></span>
- <span data-ttu-id="f9707-143">[ネットワーク セキュリティ グループ](/azure/virtual-network/manage-network-security-group) (NSG) は、パブリック IP アドレス (PIP) へのアクセスを制限し、ジャンプ ボックスのサブネットに接続されている VM にアクセスするためにポート 3389 と 22 を許可します。</span><span class="sxs-lookup"><span data-stu-id="f9707-143">[Network security groups](/azure/virtual-network/manage-network-security-group) (NSGs) limit access to the public IP address (PIP) and allow ports 3389 and 22 for access to the VMs attached to the Jumpbox subnet.</span></span>
- <span data-ttu-id="f9707-144">[仮想ネットワーク ピアリング](/azure/virtual-network/virtual-network-peering-overview)は、PhotoScan 仮想ネットワークを Avere 仮想ネットワークに接続します。</span><span class="sxs-lookup"><span data-stu-id="f9707-144">[Virtual network peering](/azure/virtual-network/virtual-network-peering-overview) connects a PhotoScan virtual network to an Avere virtual network.</span></span>
- <span data-ttu-id="f9707-145">[Azure Blob Storage](/azure/storage/blobs/storage-blobs-introduction) は、処理されているコミットされたデータを格納するコア ファィラーとして Avere vFXT と連携します。</span><span class="sxs-lookup"><span data-stu-id="f9707-145">[Azure Blob storage](/azure/storage/blobs/storage-blobs-introduction) works with Avere vFXT as the core filer to store the committed data being processed.</span></span> <span data-ttu-id="f9707-146">Avere vFXT では、Azure BLOB に格納されているアクティブなデータを識別し、PhotoScan ジョブの実行中に、コンピューティング ノードでキャッシングに使用されるソリッド ステート ドライブ (SSD) 内で階層化します。</span><span class="sxs-lookup"><span data-stu-id="f9707-146">Avere vFXT identifies the active data stored in Azure Blob and tiers it into solid-state drives (SSD) used for caching in its compute nodes while a PhotoScan job is running.</span></span> <span data-ttu-id="f9707-147">変更が加えられると、データはコア フィルターに非同期的にコミットされます。</span><span class="sxs-lookup"><span data-stu-id="f9707-147">If changes are made, the data is asynchronously committed back to the core filer.</span></span>
- <span data-ttu-id="f9707-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) は、管理者のパスワードと PhotoScan アクティブ化コードを格納するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="f9707-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) is used to store the administrator passwords and PhotoScan activation code.</span></span>

### <a name="alternatives"></a><span data-ttu-id="f9707-149">代替手段</span><span class="sxs-lookup"><span data-stu-id="f9707-149">Alternatives</span></span>

- <span data-ttu-id="f9707-150">HPC クラスターを管理するために Azure サービスを利用するには、テンプレートまたはスクリプトを使用してリソースを管理するのではなく Azure CycleCloud、Azure Batch などのツールを使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-150">To take advantage of Azure services for managing an HPC cluster, use tools such as Azure CycleCloud or Azure Batch instead of managing the resources through templates or scripts.</span></span>
- <span data-ttu-id="f9707-151">Avere vFXT の代わりに Azure 上のバックエンド ストレージとして BeeGFS 並列仮想ファイル システムをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="f9707-151">Deploy the BeeGFS parallel virtual file system as the back-end storage on Azure instead of Avere vFXT.</span></span> <span data-ttu-id="f9707-152">[BeeGFS テンプレート](https://github.com/paulomarquesc/beegfs-template)を使用して、Azure でこのエンド ツー エンド ソリューションをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="f9707-152">Use the [BeeGFS template](https://github.com/paulomarquesc/beegfs-template) to deploy this end-to-end solution on Azure.</span></span>
- <span data-ttu-id="f9707-153">GlusterFS、Lustre、Windows 記憶域スペース ダイレクトなど、任意のストレージ ソリューションをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="f9707-153">Deploy the storage solution of your choice, such as GlusterFS, Lustre, or Windows Storage Spaces Direct.</span></span> <span data-ttu-id="f9707-154">これを行うには、目的のストレージ ソリューションと連携するように [PhotoScan テンプレート](https://github.com/paulomarquesc/photoscan-template)を編集します。</span><span class="sxs-lookup"><span data-stu-id="f9707-154">To do this, edit the [PhotoScan template](https://github.com/paulomarquesc/photoscan-template) to work with the storage solution you want.</span></span>
- <span data-ttu-id="f9707-155">既定のオプションである Linux ではなく、Windows オペレーティング システムでワーカー ノードをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="f9707-155">Deploy the worker nodes with the Windows operating system instead of Linux, the default option.</span></span> <span data-ttu-id="f9707-156">Windows ノードを選択するときに、ストレージの統合オプションは、デプロイ テンプレートによって実行されません。</span><span class="sxs-lookup"><span data-stu-id="f9707-156">When choosing Windows nodes, storage integration options are not executed by the deployment templates.</span></span> <span data-ttu-id="f9707-157">既存のストレージ ソリューションと環境を手動で統合するか、「[リポジトリ](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md)」の説明に従って、このような自動化を提供するように PhotoScan テンプレートをカスタマイズする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9707-157">You must manually integrate the environment with an existing storage solution, or customize the PhotoScan template to provide such automation, as described in the [repository](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span></span>

## <a name="considerations"></a><span data-ttu-id="f9707-158">考慮事項</span><span class="sxs-lookup"><span data-stu-id="f9707-158">Considerations</span></span>

<span data-ttu-id="f9707-159">このシナリオは、Windows または Linux に配置されたかどうかに関わらず、HPC ワークロード向けの高パフォーマンス ストレージを提供することに特化して設計されています。</span><span class="sxs-lookup"><span data-stu-id="f9707-159">This scenario is designed specifically to provide high-performance storage for an HPC workload, whether it is deployed on Windows or Linux.</span></span> <span data-ttu-id="f9707-160">通常、HPC ワークロードのストレージの構成は、オンプレミス デプロイで使用される適切なベスト プラクティスと一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9707-160">In general, the storage configuration of the HPC workload should match the appropriate best practices used for on-premises deployments.</span></span>

<span data-ttu-id="f9707-161">デプロイに関する考慮事項は、使用するアプリケーションとサービスによって異なりますが、いくつかの注意事項が適用されます。</span><span class="sxs-lookup"><span data-stu-id="f9707-161">Deployment considerations depend on the applications and services used, but a few notes apply:</span></span>

- <span data-ttu-id="f9707-162">高パフォーマンス アプリケーションを構築する場合は、Azure Premium Storage を使用して、[アプリケーション レイヤーを最適化](/azure/virtual-machines/windows/premium-storage-performance)します。</span><span class="sxs-lookup"><span data-stu-id="f9707-162">When building high-performance applications, use Azure Premium Storage and [optimize the application layer](/azure/virtual-machines/windows/premium-storage-performance).</span></span> <span data-ttu-id="f9707-163">Azure BLOB [ホット層アクセス](/azure/storage/blobs/storage-blob-storage-tiers)を使用して頻繁なアクセス向けにストレージを最適化します。</span><span class="sxs-lookup"><span data-stu-id="f9707-163">Optimize storage for frequent access using Azure Blob [hot tier access](/azure/storage/blobs/storage-blob-storage-tiers).</span></span>
- <span data-ttu-id="f9707-164">可用性とパフォーマンスの要件を満たすストレージ [レプリケーション オプション](/azure/storage/common/storage-redundancy)を使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-164">Use a storage [replication option](/azure/storage/common/storage-redundancy) that that meets your availability and performance requirements.</span></span> <span data-ttu-id="f9707-165">この例で Avere vFXT は既定で、ローカル冗長ストレージ (LRS) を使用して高可用性向けに構成されています。</span><span class="sxs-lookup"><span data-stu-id="f9707-165">In this example, Avere vFXT is configured for high availability by default, with locally redundant storage (LRS).</span></span> <span data-ttu-id="f9707-166">このセットアップでは、負荷分散のために、すべての VM で vFXT へのアクセスにラウンドロビン パターンを使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-166">For load balancing, all VMs in this setup use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="f9707-167">バックエンド ストレージを Windows クライアントと Linux クライアントの両方で使用する場合は、Samba サーバーを使用して Windows ノードをサポートします。</span><span class="sxs-lookup"><span data-stu-id="f9707-167">If the backend storage will be consumed by both Windows clients and Linux clients, use Samba servers to support the Windows nodes.</span></span> <span data-ttu-id="f9707-168">BeeGFS に基づくこの例のシナリオの 1 [バージョン](https://github.com/paulomarquesc/beegfs-template)では、Windows で実行されている HPC ワークロード (PhotoScan) のスケジューラ ノードをサポートするために Samba を使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-168">A [version](https://github.com/paulomarquesc/beegfs-template) of this example scenario based on BeeGFS uses Samba to support the scheduler node of the HPC workload (PhotoScan) running on Windows.</span></span> <span data-ttu-id="f9707-169">DNS ラウンドロビンのスマート置換ように機能するようにロード バランサーがデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="f9707-169">A load balancer is deployed to act like a smart replacement for DNS round robin.</span></span>
- <span data-ttu-id="f9707-170">[Windows](/azure/virtual-machines/windows/sizes-hpc) または [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) のワークロードに最適な VM の種類を使用して HPC アプリケーションを実行してください。</span><span class="sxs-lookup"><span data-stu-id="f9707-170">Run HPC applications using the VM type best suited for your [Windows](/azure/virtual-machines/windows/sizes-hpc) or [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) workload.</span></span>
- <span data-ttu-id="f9707-171">ストレージ リソースから HPC ワークロードを分離するには、独自の仮想ネットワーク内にそれぞれをデプロイしたうえで、仮想ネットワーク [ピアリング](/azure/virtual-network/virtual-network-peering-overview)を使用してこの 2 つを接続します。</span><span class="sxs-lookup"><span data-stu-id="f9707-171">To isolate the HPC workload from the storage resources, deploy each in its own virtual network, then use virtual network [peering](/azure/virtual-network/virtual-network-peering-overview) to connect the two.</span></span> <span data-ttu-id="f9707-172">ピアリングによって、異なる仮想ネットワーク内のリソース間に低待機時間、高帯域幅の接続が作られ、プライベート IP アドレスのみを介した Microsoft のバックボーン インフラストラクチャを通じてトラフィックがルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="f9707-172">Peering creates a low-latency, high-bandwidth connection between resources in different virtual networks and routes traffic through the Microsoft backbone infrastructure through private IP addresses only.</span></span>

### <a name="security"></a><span data-ttu-id="f9707-173">セキュリティ</span><span class="sxs-lookup"><span data-stu-id="f9707-173">Security</span></span>

<span data-ttu-id="f9707-174">この例では、HPC ワークロード向けの高パフォーマンス ストレージ ソリューションのデプロイについて説明しており、セキュリティ ソリューションではありません。</span><span class="sxs-lookup"><span data-stu-id="f9707-174">This example focuses on deploying a high-performance storage solution for an HPC workload and is not a security solution.</span></span> <span data-ttu-id="f9707-175">変更を加えるには、必ずセキュリティ チームが関与するようにしてください。</span><span class="sxs-lookup"><span data-stu-id="f9707-175">Make sure to involve your security team for any changes.</span></span>

<span data-ttu-id="f9707-176">セキュリティを強化する場合、このサンプルのインフラストラクチャでは、すべての Windows VM をドメインに参加済みにすることと、一元認証に Active Directory を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="f9707-176">For added security, this example infrastructure enables all the Windows VMs to be domain-joined and uses Active Directory for central authentication.</span></span> <span data-ttu-id="f9707-177">すべての VM 用にカスタム DNS サービスも提供します。</span><span class="sxs-lookup"><span data-stu-id="f9707-177">It also provides custom DNS services for all VMs.</span></span> <span data-ttu-id="f9707-178">環境の保護を容易にするために、このテンプレートでは[ネットワーク セキュリティ グループ (NSG)](/azure/virtual-network/security-overview) を利用しています。</span><span class="sxs-lookup"><span data-stu-id="f9707-178">To help protect the environment, this template relies on [network security groups (NSGs)](/azure/virtual-network/security-overview).</span></span> <span data-ttu-id="f9707-179">NSG は、基本的なトラフィック フィルターとセキュリティ規則を提供します。</span><span class="sxs-lookup"><span data-stu-id="f9707-179">NSGs offer basic traffic filters and security rules.</span></span>

<span data-ttu-id="f9707-180">このシナリオでのセキュリティをさらに強化するには、次のオプションを検討してください。</span><span class="sxs-lookup"><span data-stu-id="f9707-180">Consider the following options to further improve security in this scenario:</span></span>

- <span data-ttu-id="f9707-181">Fortinet、Checkpoint、Juniper などのネットワーク仮想アプライアンスを使用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-181">Use network virtual appliances such as Fortinet, Checkpoint, and Juniper.</span></span>
- <span data-ttu-id="f9707-182">[ロールベースのアクセス制御](/azure/role-based-access-control/overview)をリソース グループに適用します。</span><span class="sxs-lookup"><span data-stu-id="f9707-182">Apply [role-based access control](/azure/role-based-access-control/overview) to the resource groups.</span></span>
- <span data-ttu-id="f9707-183">ジャンプ ボックスにインターネット経由でアクセスする場合、VM [JIT](/azure/security-center/security-center-just-in-time) アクセスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="f9707-183">Enable VM [JIT](/azure/security-center/security-center-just-in-time) access if jump boxes are accessed via the Internet.</span></span>
- <span data-ttu-id="f9707-184">[Azure Key Vault](/azure/key-vault/quick-create-portal) を使用して管理者アカウントで使用されるパスワードを保存します。</span><span class="sxs-lookup"><span data-stu-id="f9707-184">Use [Azure Key Vault](/azure/key-vault/quick-create-portal) to store the passwords used by administrator accounts.</span></span>

## <a name="pricing"></a><span data-ttu-id="f9707-185">価格</span><span class="sxs-lookup"><span data-stu-id="f9707-185">Pricing</span></span>

<span data-ttu-id="f9707-186">このシナリオを実行するコストは、複数の要因に応じて大きく異なります。</span><span class="sxs-lookup"><span data-stu-id="f9707-186">The cost of running this scenario can vary greatly depending on on multiple factors.</span></span>  <span data-ttu-id="f9707-187">VM の数とサイズ、必要なストレージの量、ジョブを完了するためにかかる時間によってコストが決まります。</span><span class="sxs-lookup"><span data-stu-id="f9707-187">The number and size of VMs, how much storage is required, and the amount of time to complete a job will determine your cost.</span></span>

<span data-ttu-id="f9707-188">[Azure 料金計算ツール](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3)での次のコスト プロファイル例は、Avere vFXT と PhotoScan に対する一般的な構成に基づきます。</span><span class="sxs-lookup"><span data-stu-id="f9707-188">The following sample cost profile in the [Azure pricing calculator](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) is based on a typical configuration for Avere vFXT and PhotoScan:</span></span>

- <span data-ttu-id="f9707-189">Avere コントローラーを実行する 1 つの A1\_v2 Ubuntu VM。</span><span class="sxs-lookup"><span data-stu-id="f9707-189">1 A1\_v2 Ubuntu VM to run the Avere controller.</span></span>
- <span data-ttu-id="f9707-190">vFXT クラスターを形成する Avere vFXT ノードごとに 1 つの 3 つの D16s\_v3 Avere OS VM。</span><span class="sxs-lookup"><span data-stu-id="f9707-190">3 D16s\_v3 Avere OS VMs, one for each of the Avere vFXT nodes that form the vFXT cluster.</span></span>
- <span data-ttu-id="f9707-191">PhotoScan 処理ノードで必要な GPU を提供する 5 つの NC24\_v2 Linux VM。</span><span class="sxs-lookup"><span data-stu-id="f9707-191">5 NC24\_v2 Linux VMs to provide the GPUs needed by the PhotoScan processing nodes.</span></span>
- <span data-ttu-id="f9707-192">PhotoScan スケジューラ ノードの 1 つの D8s\_v3 CentOS VM。</span><span class="sxs-lookup"><span data-stu-id="f9707-192">1 D8s\_v3 CentOS VM for the PhotoScan scheduler node.</span></span>
- <span data-ttu-id="f9707-193">管理者のジャンプ ボックスとして使用する 1 つの DS2\_v2 CentOS。</span><span class="sxs-lookup"><span data-stu-id="f9707-193">1 DS2\_v2 CentOS used as administrator jumpbox.</span></span>
- <span data-ttu-id="f9707-194">Active Directory ドメイン コントローラー用の 2 つの DS2\_v2 VM。</span><span class="sxs-lookup"><span data-stu-id="f9707-194">2 DS2\_v2 VMs for the Active Directory domain controllers.</span></span>
- <span data-ttu-id="f9707-195">Premium Managed Disks。</span><span class="sxs-lookup"><span data-stu-id="f9707-195">Premium managed disks.</span></span>
- <span data-ttu-id="f9707-196">LRS とホット層アクセスを装備した汎用 v2 (GPv2) BLOB ストレージ (GPv2 ストレージ アカウントのみがアクセス層属性を公開)。</span><span class="sxs-lookup"><span data-stu-id="f9707-196">General purpose v2 (GPv2) Blob storage with LRS and hot tier access (only GPv2 storage accounts expose the Access Tier attribute).</span></span>
- <span data-ttu-id="f9707-197">10 TB のデータ転送をサポートする仮想ネットワーク。</span><span class="sxs-lookup"><span data-stu-id="f9707-197">Virtual network with support for 10 TB data transfer.</span></span>

<span data-ttu-id="f9707-198">このアーキテクチャについて詳しくは、[電子ブック](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9707-198">For details about this architecture, see the [ebook](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span> <span data-ttu-id="f9707-199">特定のユース ケースについて料金の変化を確認するには、予想されるデプロイに合わせて料金計算ツールでさまざまな VM サイズを選択します。</span><span class="sxs-lookup"><span data-stu-id="f9707-199">To see how the pricing would change for your particular use case, choose different VM sizes in the pricing calculator to match your expected deployment.</span></span>

## <a name="deployment"></a><span data-ttu-id="f9707-200">Deployment</span><span class="sxs-lookup"><span data-stu-id="f9707-200">Deployment</span></span>

<span data-ttu-id="f9707-201">Avere FxT または BeeGFS のいずれかを使用するためのすべての前提条件を含む、このアーキテクチャをデプロイする手順については、次の電子ブックをダウンロードしてください。[Avere vFXT for Azure または BeeGFS を使用して Agisoft PhotoScan を Azure にデプロイする](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/)。</span><span class="sxs-lookup"><span data-stu-id="f9707-201">For step-by-step instructions for deploying this architecture, including all the prerequisites for using either Avere FxT or BeeGFS, download the ebook: [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span>

## <a name="related-resources"></a><span data-ttu-id="f9707-202">関連リソース</span><span class="sxs-lookup"><span data-stu-id="f9707-202">Related resources</span></span>

<span data-ttu-id="f9707-203">次のリソースは、このシナリオで使用されるコンポーネントの詳細と、Azure でのバッチ コンピューティング用の代替方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="f9707-203">The following resources will provide more information on the components utilized in this scenario, along with alternative approaches for batch computing on Azure.</span></span>

- <span data-ttu-id="f9707-204">[Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview) の概要</span><span class="sxs-lookup"><span data-stu-id="f9707-204">Overview of [Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview)</span></span>
- <span data-ttu-id="f9707-205">[Agisoft PhotoScan](https://www.agisoft.com/) ホーム ページ</span><span class="sxs-lookup"><span data-stu-id="f9707-205">[Agisoft PhotoScan](https://www.agisoft.com/) home Page</span></span>
- [<span data-ttu-id="f9707-206">Azure Storage のパフォーマンスとスケーラビリティのチェック リスト</span><span class="sxs-lookup"><span data-stu-id="f9707-206">Azure Storage Performance and Scalability Checklist</span></span>](/azure/storage/common/storage-performance-checklist)
- <span data-ttu-id="f9707-207">[Microsoft Azure での並列の仮想ファイル システム:Lustre、GlusterFS、および BeeGFS のパフォーマンス テスト](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span><span class="sxs-lookup"><span data-stu-id="f9707-207">[Parallel Virtual File Systems on Microsoft Azure: Performance tests of Lustre, GlusterFS, and BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span></span>
- <span data-ttu-id="f9707-208">[Azure でのコンピューター支援エンジニアリング (CAE)](/azure/architecture/example-scenario/apps/hpc-saas) シナリオ例</span><span class="sxs-lookup"><span data-stu-id="f9707-208">An example scenario for [computer-aided engineering (CAE) on Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span></span>
- <span data-ttu-id="f9707-209">[Azure での HPC](https://azure.microsoft.com/en-us/solutions/high-performance-computing/) ホーム ページ</span><span class="sxs-lookup"><span data-stu-id="f9707-209">[HPC on Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/) home page</span></span>
- <span data-ttu-id="f9707-210">概要: [ビッグ コンピューティング:HPC &amp;および Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span><span class="sxs-lookup"><span data-stu-id="f9707-210">Overview of [Big Compute: HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span></span>