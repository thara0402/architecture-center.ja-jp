---
title: Apache Cassandra を使用する N 層アプリケーション
titleSuffix: Azure Reference Architectures
description: Microsoft Azure で Apache Cassandra を使用して N 層アーキテクチャの Linux 仮想マシンを実行します。
author: MikeWasson
ms.date: 11/12/2018
ms.custom: seodec18
ms.openlocfilehash: bbd1029fe17b5d88d54246127c5d8983a573b012
ms.sourcegitcommit: 88a68c7e9b6b772172b7faa4b9fd9c061a9f7e9d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/08/2018
ms.locfileid: "53120171"
---
# <a name="linux-n-tier-application-in-azure-with-apache-cassandra"></a><span data-ttu-id="48e50-103">Apache Cassandra を使用する Azure の Linux N 層アプリケーション</span><span class="sxs-lookup"><span data-stu-id="48e50-103">Linux N-tier application in Azure with Apache Cassandra</span></span>

<span data-ttu-id="48e50-104">この参照アーキテクチャでは、Linux 上の Apache Cassandra をデータ層に使用して、N 層アプリケーション用に構成された仮想マシン (VM) と仮想ネットワークをデプロイする方法を示します。</span><span class="sxs-lookup"><span data-stu-id="48e50-104">This reference architecture shows how to deploy virtual machines (VMs) and a virtual network configured for an N-tier application, using Apache Cassandra on Linux for the data tier.</span></span> <span data-ttu-id="48e50-105">[**このソリューションをデプロイします**](#deploy-the-solution)。</span><span class="sxs-lookup"><span data-stu-id="48e50-105">[**Deploy this solution**](#deploy-the-solution).</span></span>

![Microsoft Azure を使用した N 層アーキテクチャ](./images/n-tier-cassandra.png)

<span data-ttu-id="48e50-107">"*このアーキテクチャの [Visio ファイル][visio-download]をダウンロードします。*"</span><span class="sxs-lookup"><span data-stu-id="48e50-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="48e50-108">アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="48e50-108">Architecture</span></span>

<span data-ttu-id="48e50-109">アーキテクチャには次のコンポーネントがあります。</span><span class="sxs-lookup"><span data-stu-id="48e50-109">The architecture has the following components:</span></span>

- <span data-ttu-id="48e50-110">**リソース グループ**。</span><span class="sxs-lookup"><span data-stu-id="48e50-110">**Resource group**.</span></span> <span data-ttu-id="48e50-111">[リソース グループ][resource-manager-overview]は、リソースをグループ化して、有効期間、所有者、またはその他の条件別に管理できるようにするために使用されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-111">[Resource groups][resource-manager-overview] are used to group resources so they can be managed by lifetime, owner, or other criteria.</span></span>

- <span data-ttu-id="48e50-112">**仮想ネットワーク (VNet) とサブネット**。</span><span class="sxs-lookup"><span data-stu-id="48e50-112">**Virtual network (VNet) and subnets**.</span></span> <span data-ttu-id="48e50-113">どの Azure VM も、サブネットにセグメント化できる VNet にデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="48e50-113">Every Azure VM is deployed into a VNet that can be segmented into subnets.</span></span> <span data-ttu-id="48e50-114">階層ごとに個別のサブネットを作成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-114">Create a separate subnet for each tier.</span></span>

- <span data-ttu-id="48e50-115">**NSG**。</span><span class="sxs-lookup"><span data-stu-id="48e50-115">**NSGs**.</span></span> <span data-ttu-id="48e50-116">[ネットワーク セキュリティ グループ][nsg] (NSG) を使用して、VNet 内のネットワーク トラフィックを制限します。</span><span class="sxs-lookup"><span data-stu-id="48e50-116">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="48e50-117">たとえば、ここに示されている 3 層アーキテクチャでは、データベース層は、ビジネス層と管理サブネットからトラフィックを受信します。Web フロントエンドからは受信しません。</span><span class="sxs-lookup"><span data-stu-id="48e50-117">For example, in the three-tier architecture shown here, the database tier accepts traffic from the business tier and the management subnet, but not the web front end.</span></span>

- <span data-ttu-id="48e50-118">**DDoS Protection**。</span><span class="sxs-lookup"><span data-stu-id="48e50-118">**DDoS Protection**.</span></span> <span data-ttu-id="48e50-119">Azure プラットフォームには分散型サービス拒否 (DDoS) 攻撃に対する基本的な保護が用意されていますが、Microsoft では [DDoS Protection Standard][ddos] を使用することをお勧めします。このサービスでは、DDoS 攻撃を軽減する機能が強化されています。</span><span class="sxs-lookup"><span data-stu-id="48e50-119">Although the Azure platform provides basic protection against distributed denial of service (DDoS) attacks, we recommend using [DDoS Protection Standard][ddos], which has enhanced DDoS mitigation features.</span></span> <span data-ttu-id="48e50-120">「[セキュリティに関する考慮事項](#security-considerations)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-120">See [Security considerations](#security-considerations).</span></span>

- <span data-ttu-id="48e50-121">**仮想マシン**。</span><span class="sxs-lookup"><span data-stu-id="48e50-121">**Virtual machines**.</span></span> <span data-ttu-id="48e50-122">VM の構成に関する推奨事項については、「[Run a Windows VM on Azure (Azure での Windows VM の実行)](./windows-vm.md)」および「[Run a Linux VM on Azure (Azure での Linux VM の実行)](./linux-vm.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="48e50-122">For recommendations on configuring VMs, see [Run a Windows VM on Azure](./windows-vm.md) and [Run a Linux VM on Azure](./linux-vm.md).</span></span>

- <span data-ttu-id="48e50-123">**可用性セット**。</span><span class="sxs-lookup"><span data-stu-id="48e50-123">**Availability sets**.</span></span> <span data-ttu-id="48e50-124">階層ごとに[可用性セット][azure-availability-sets]を作成し、各階層に 2 つ以上の VM をプロビジョニングします。これにより、VM がさらに高度な[サービス レベル アグリーメント (SLA)][vm-sla] に対応できるようになります。</span><span class="sxs-lookup"><span data-stu-id="48e50-124">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier, which makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla].</span></span>

- <span data-ttu-id="48e50-125">**Azure ロード バランサー**。</span><span class="sxs-lookup"><span data-stu-id="48e50-125">**Azure load balancers**.</span></span> <span data-ttu-id="48e50-126">[ロード バランサー][load-balancer]は、受信インターネット要求を各 VM インスタンスに分散します。</span><span class="sxs-lookup"><span data-stu-id="48e50-126">The [load balancers][load-balancer] distribute incoming Internet requests to the VM instances.</span></span> <span data-ttu-id="48e50-127">[パブリック ロード バランサー][load-balancer-external]を使用して受信インターネット トラフィックを Web 層に分散し、[内部ロード バランサー][load-balancer-internal]を使用して Web 層からのネットワーク トラフィックをビジネス層に分散します。</span><span class="sxs-lookup"><span data-stu-id="48e50-127">Use a [public load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>

- <span data-ttu-id="48e50-128">**パブリック IP アドレス**。</span><span class="sxs-lookup"><span data-stu-id="48e50-128">**Public IP address**.</span></span> <span data-ttu-id="48e50-129">パブリック IP アドレスは、パブリック ロード バランサーがインターネット トラフィックを受信するために必要です。</span><span class="sxs-lookup"><span data-stu-id="48e50-129">A public IP address is needed for the public load balancer to receive Internet traffic.</span></span>

- <span data-ttu-id="48e50-130">**Jumpbox**。</span><span class="sxs-lookup"><span data-stu-id="48e50-130">**Jumpbox**.</span></span> <span data-ttu-id="48e50-131">[要塞ホスト]とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="48e50-131">Also called a [bastion host].</span></span> <span data-ttu-id="48e50-132">管理者が他の VM に接続するために使用するネットワーク上のセキュアな VM です。</span><span class="sxs-lookup"><span data-stu-id="48e50-132">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="48e50-133">jumpbox の NSG は、セーフ リストにあるパブリック IP アドレスからのリモート トラフィックのみを許可します。</span><span class="sxs-lookup"><span data-stu-id="48e50-133">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="48e50-134">NSG では SSH トラフィックを許可する必要があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-134">The NSG should allow ssh traffic.</span></span>

- <span data-ttu-id="48e50-135">**Apache Cassandra データベース**。</span><span class="sxs-lookup"><span data-stu-id="48e50-135">**Apache Cassandra database**.</span></span> <span data-ttu-id="48e50-136">レプリケーションとフェールオーバーを有効にすることで、データ層で高い可用性を提供します。</span><span class="sxs-lookup"><span data-stu-id="48e50-136">Provides high availability at the data tier, by enabling replication and failover.</span></span>

- <span data-ttu-id="48e50-137">**Azure DNS**。</span><span class="sxs-lookup"><span data-stu-id="48e50-137">**Azure DNS**.</span></span> <span data-ttu-id="48e50-138">[Azure DNS][azure-dns] は DNS ドメインのホスティング サービスです。</span><span class="sxs-lookup"><span data-stu-id="48e50-138">[Azure DNS][azure-dns] is a hosting service for DNS domains.</span></span> <span data-ttu-id="48e50-139">これは Microsoft Azure インフラストラクチャを使用した名前解決を提供します。</span><span class="sxs-lookup"><span data-stu-id="48e50-139">It provides name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="48e50-140">Azure でドメインをホストすることで、その他の Azure サービスと同じ資格情報、API、ツール、課金情報を使用して DNS レコードを管理できます。</span><span class="sxs-lookup"><span data-stu-id="48e50-140">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>

## <a name="recommendations"></a><span data-ttu-id="48e50-141">Recommendations</span><span class="sxs-lookup"><span data-stu-id="48e50-141">Recommendations</span></span>

<span data-ttu-id="48e50-142">実際の要件は、ここで説明するアーキテクチャとは異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-142">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="48e50-143">これらの推奨事項を開始点として使用してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-143">Use these recommendations as a starting point.</span></span>

### <a name="vnet--subnets"></a><span data-ttu-id="48e50-144">VNet/サブネット</span><span class="sxs-lookup"><span data-stu-id="48e50-144">VNet / Subnets</span></span>

<span data-ttu-id="48e50-145">VNet を作成するときに、各サブネット内のリソースが要求する IP アドレスの数を決定します。</span><span class="sxs-lookup"><span data-stu-id="48e50-145">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="48e50-146">[CIDR] 表記を使用して、必要な IP アドレスにとって十分な規模のサブネット マスクと VNet アドレス範囲を指定します。</span><span class="sxs-lookup"><span data-stu-id="48e50-146">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="48e50-147">標準的な[プライベート IP アドレス ブロック][private-ip-space] (10.0.0.0/8、172.16.0.0/12、192.168.0.0/16) の範囲内にあるアドレス空間を使用します。</span><span class="sxs-lookup"><span data-stu-id="48e50-147">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="48e50-148">後で VNet とオンプレミスのネットワークとの間にゲートウェイを設定する必要がある場合は、オンプレミスのネットワークと重複しないアドレス範囲を選択します。</span><span class="sxs-lookup"><span data-stu-id="48e50-148">Choose an address range that doesn't overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="48e50-149">VNet を作成した後は、アドレス範囲を変更できません。</span><span class="sxs-lookup"><span data-stu-id="48e50-149">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="48e50-150">機能とセキュリティの要件を念頭に置いてサブネットを設計します。</span><span class="sxs-lookup"><span data-stu-id="48e50-150">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="48e50-151">同じ層または同じロール内のすべての VM は、同じサブネットに入れる必要があります。これがセキュリティ境界になります。</span><span class="sxs-lookup"><span data-stu-id="48e50-151">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="48e50-152">VNet とサブネットの設計に関する詳細については、「[Azure Virtual Network の計画と設計][plan-network]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-152">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

### <a name="load-balancers"></a><span data-ttu-id="48e50-153">ロード バランサー</span><span class="sxs-lookup"><span data-stu-id="48e50-153">Load balancers</span></span>

<span data-ttu-id="48e50-154">VM は直接インターネットに公開しないでください。</span><span class="sxs-lookup"><span data-stu-id="48e50-154">Do not expose the VMs directly to the Internet.</span></span> <span data-ttu-id="48e50-155">代わりに、各 VM にプライベート IP アドレスを付与します。</span><span class="sxs-lookup"><span data-stu-id="48e50-155">Instead, give each VM a private IP address.</span></span> <span data-ttu-id="48e50-156">クライアントは、パブリック ロード バランサーの IP アドレスを使用して接続します。</span><span class="sxs-lookup"><span data-stu-id="48e50-156">Clients connect using the IP address of the public load balancer.</span></span>

<span data-ttu-id="48e50-157">ロード バランサー規則を定義して、ネットワーク トラフィックを VM に転送します。</span><span class="sxs-lookup"><span data-stu-id="48e50-157">Define load balancer rules to direct network traffic to the VMs.</span></span> <span data-ttu-id="48e50-158">たとえば、HTTP トラフィックを有効にするには、フロントエンド構成からのポート 80 をバックエンド アドレス プールのポート 80 にマッピングする規則を作成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-158">For example, to enable HTTP traffic, create a rule that maps port 80 from the front-end configuration to port 80 on the back-end address pool.</span></span> <span data-ttu-id="48e50-159">クライアントがポート 80 に HTTP 要求を送信するときに、ロード バランサーは、発信元 IP アドレスを含む[ハッシュ アルゴリズム][load-balancer-hashing]を使用して、バックエンド IP アドレスを選択します。</span><span class="sxs-lookup"><span data-stu-id="48e50-159">When a client sends an HTTP request to port 80, the load balancer selects a back-end IP address by using a [hashing algorithm][load-balancer-hashing] that includes the source IP address.</span></span> <span data-ttu-id="48e50-160">クライアント要求がすべての VM に分散されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-160">Client requests are distributed across all the VMs.</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="48e50-161">ネットワーク セキュリティ グループ</span><span class="sxs-lookup"><span data-stu-id="48e50-161">Network security groups</span></span>

<span data-ttu-id="48e50-162">NSG ルールを使用して階層間のトラフィックを制限します。</span><span class="sxs-lookup"><span data-stu-id="48e50-162">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="48e50-163">たとえば、上記の 3 層アーキテクチャでは、Web 層はデータベース層と直接通信しません。</span><span class="sxs-lookup"><span data-stu-id="48e50-163">For example, in the three-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="48e50-164">これを強制するには、データベース層が Web 層のサブネットからの着信トラフィックをブロックする必要があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-164">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>

1. <span data-ttu-id="48e50-165">VNet からのすべての受信トラフィックを拒否します。</span><span class="sxs-lookup"><span data-stu-id="48e50-165">Deny all inbound traffic from the VNet.</span></span> <span data-ttu-id="48e50-166">(ルール内で `VIRTUAL_NETWORK` タグを使用します。)</span><span class="sxs-lookup"><span data-stu-id="48e50-166">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span>
2. <span data-ttu-id="48e50-167">ビジネス層のサブネットからの受信トラフィックを許可します。</span><span class="sxs-lookup"><span data-stu-id="48e50-167">Allow inbound traffic from the business tier subnet.</span></span>
3. <span data-ttu-id="48e50-168">データベース層のサブネットからの受信トラフィックを許可します。</span><span class="sxs-lookup"><span data-stu-id="48e50-168">Allow inbound traffic from the database tier subnet itself.</span></span> <span data-ttu-id="48e50-169">このルールにより、データベースのレプリケーションやフェールオーバーに必要な、データベース VM 間の通信が可能になります。</span><span class="sxs-lookup"><span data-stu-id="48e50-169">This rule allows communication between the database VMs, which is needed for database replication and failover.</span></span>
4. <span data-ttu-id="48e50-170">ジャンプボックスのサブネットからの SSH トラフィック (ポート 22) を許可します。</span><span class="sxs-lookup"><span data-stu-id="48e50-170">Allow ssh traffic (port 22) from the jumpbox subnet.</span></span> <span data-ttu-id="48e50-171">このルールによって、管理者がジャンプボックスからデータベース層に接続できるようにします。</span><span class="sxs-lookup"><span data-stu-id="48e50-171">This rule lets administrators connect to the database tier from the jumpbox.</span></span>

<span data-ttu-id="48e50-172">最初のルールよりも高い優先順位を設定してルール 2 から 4 を作成し、最初のルールをオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="48e50-172">Create rules 2 &ndash; 4 with higher priority than the first rule, so they override it.</span></span>

### <a name="cassandra"></a><span data-ttu-id="48e50-173">Cassandra</span><span class="sxs-lookup"><span data-stu-id="48e50-173">Cassandra</span></span>

<span data-ttu-id="48e50-174">運用環境では [DataStax Enterprise][datastax] の使用をお勧めしますが、これらの推奨事項はすべての Cassandra エディションに適用されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-174">We recommend [DataStax Enterprise][datastax] for production use, but these recommendations apply to any Cassandra edition.</span></span> <span data-ttu-id="48e50-175">Azure での DataStax の実行の詳細については、「[Azure 用の DataStax Enterprise Deployment ガイド][cassandra-in-azure]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-175">For more information on running DataStax in Azure, see [DataStax Enterprise Deployment Guide for Azure][cassandra-in-azure].</span></span>

<span data-ttu-id="48e50-176">Cassandra クラスター用の VM を可用性セット内に配置して、Cassandra レプリカが複数の障害ドメインおよびアップグレード ドメイン間に分散されることを保証します。</span><span class="sxs-lookup"><span data-stu-id="48e50-176">Put the VMs for a Cassandra cluster in an availability set to ensure that the Cassandra replicas are distributed across multiple fault domains and upgrade domains.</span></span> <span data-ttu-id="48e50-177">障害ドメインおよびアップグレード ドメインの詳細については、「[Virtual Machines の可用性管理][azure-availability-sets]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-177">For more information about fault domains and upgrade domains, see [Manage the availability of virtual machines][azure-availability-sets].</span></span>

<span data-ttu-id="48e50-178">可用性セットごとに 3 個の障害ドメイン (最大数) と 18 個のアップグレード ドメインを構成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-178">Configure three fault domains (the maximum) per availability set and 18 upgrade domains per availability set.</span></span> <span data-ttu-id="48e50-179">これは、障害ドメイン間で引き続き均等に分散できるアップグレード ドメインの最大数を提供します。</span><span class="sxs-lookup"><span data-stu-id="48e50-179">This provides the maximum number of upgrade domains that can still be distributed evenly across the fault domains.</span></span>

<span data-ttu-id="48e50-180">ラック認識モードでノードを構成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-180">Configure nodes in rack-aware mode.</span></span> <span data-ttu-id="48e50-181">`cassandra-rackdc.properties` ファイル内で障害ドメインをラックにマッピングします。</span><span class="sxs-lookup"><span data-stu-id="48e50-181">Map fault domains to racks in the `cassandra-rackdc.properties` file.</span></span>

<span data-ttu-id="48e50-182">クラスターの前にロード バランサーは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="48e50-182">You don't need a load balancer in front of the cluster.</span></span> <span data-ttu-id="48e50-183">クライアントはクラスターのノードに直接接続します。</span><span class="sxs-lookup"><span data-stu-id="48e50-183">The client connects directly to a node in the cluster.</span></span>

<span data-ttu-id="48e50-184">高可用性を確保するために、複数の Azure リージョンに Cassandra をデプロイします。</span><span class="sxs-lookup"><span data-stu-id="48e50-184">For high availability, deploy Cassandra in more than one Azure region.</span></span> <span data-ttu-id="48e50-185">各リージョンのノードが、リージョン内の回復性を高めるために、障害ドメインとアップグレード ドメインを持つラック認識モードで構成されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-185">Nodes within each region are configured in rack-aware mode with fault and upgrade domains, for resiliency inside the region.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="48e50-186">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="48e50-186">Jumpbox</span></span>

<span data-ttu-id="48e50-187">アプリケーション ワークロードを実行する VM へのパブリック インターネットからの SSH アクセスを許可しないでください。</span><span class="sxs-lookup"><span data-stu-id="48e50-187">Don't allow ssh access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="48e50-188">代わりに、これらの VM へのすべての SSH アクセスは、ジャンプボックスを経由する必要があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-188">Instead, all ssh access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="48e50-189">管理者はジャンプボックスにログインし、次にジャンプボックスから他の VM にログインします。</span><span class="sxs-lookup"><span data-stu-id="48e50-189">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="48e50-190">ジャンプボックスは、既知の安全な IP アドレスからのみ、インターネットからの SSH トラフィックを許可します。</span><span class="sxs-lookup"><span data-stu-id="48e50-190">The jumpbox allows ssh traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="48e50-191">ジャンプボックスのパフォーマンス要件は最小限に抑えられているので、小さな VM サイズを選択します。</span><span class="sxs-lookup"><span data-stu-id="48e50-191">The jumpbox has minimal performance requirements, so select a small VM size.</span></span> <span data-ttu-id="48e50-192">ジャンプボックス用に[パブリック IP アドレス]を作成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-192">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="48e50-193">ジャンプボックスを、他の VM と同じ VNet 内の、個別の管理サブネット内に配置します。</span><span class="sxs-lookup"><span data-stu-id="48e50-193">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="48e50-194">ジャンプボックスをセキュリティで保護するには、安全な一連のパブリック IP アドレスからのみ SSH 接続を許可する NSG ルールを追加します。</span><span class="sxs-lookup"><span data-stu-id="48e50-194">To secure the jumpbox, add an NSG rule that allows ssh connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="48e50-195">管理サブネットからの SSH トラフィックを許可するように、他のサブネットの NSG を構成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-195">Configure the NSGs for the other subnets to allow ssh traffic from the management subnet.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="48e50-196">スケーラビリティに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="48e50-196">Scalability considerations</span></span>

<span data-ttu-id="48e50-197">Web 層とビジネス層については、個別の VM を可用性セットにデプロイするのではなく、[仮想マシン スケール セット][vmss]を使用することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-197">For the web and business tiers, consider using [virtual machine scale sets][vmss], instead of deploying separate VMs into an availability set.</span></span> <span data-ttu-id="48e50-198">スケール セットにより、同一の VM のセットを簡単にデプロイおよび管理し、パフォーマンス メトリックに基づいて VM を自動スケーリングできるようになります。</span><span class="sxs-lookup"><span data-stu-id="48e50-198">A scale set makes it easy to deploy and manage a set of identical VMs, and autoscale the VMs based on performance metrics.</span></span> <span data-ttu-id="48e50-199">VM の負荷が増えると、追加の VM が自動的にロード バランサーに追加されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-199">As the load on the VMs increases, additional VMs are automatically added to the load balancer.</span></span> <span data-ttu-id="48e50-200">VM をすばやくスケール アウトしたり、自動スケールしたりする必要がある場合は、スケール セットを検討してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-200">Consider scale sets if you need to quickly scale out VMs, or need to autoscale.</span></span>

<span data-ttu-id="48e50-201">スケール セットにデプロイされる VM を構成するには、2 つの基本的な方法があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-201">There are two basic ways to configure VMs deployed in a scale set:</span></span>

- <span data-ttu-id="48e50-202">デプロイ後に、拡張機能を使用して VM を構成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-202">Use extensions to configure the VM after it's deployed.</span></span> <span data-ttu-id="48e50-203">この方法では、新しい VM インスタンスは、拡張機能なしの VM よりも起動に時間がかかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-203">With this approach, new VM instances may take longer to start up than a VM with no extensions.</span></span>

- <span data-ttu-id="48e50-204">カスタム ディスク イメージと共に[マネージド ディスク](/azure/storage/storage-managed-disks-overview)をデプロイします。</span><span class="sxs-lookup"><span data-stu-id="48e50-204">Deploy a [managed disk](/azure/storage/storage-managed-disks-overview) with a custom disk image.</span></span> <span data-ttu-id="48e50-205">このオプションの方が早くデプロイできる場合があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-205">This option may be quicker to deploy.</span></span> <span data-ttu-id="48e50-206">ただし、イメージを最新の状態に保つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-206">However, it requires you to keep the image up-to-date.</span></span>

<span data-ttu-id="48e50-207">詳細については、「[スケール セットの設計上の考慮事項][vmss-design]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-207">For more information, see [Design considerations for scale sets][vmss-design].</span></span>

> [!TIP]
> <span data-ttu-id="48e50-208">自動スケールのソリューションを使用する場合は、十分前もって実稼働レベルのワークロードでテストしてください。</span><span class="sxs-lookup"><span data-stu-id="48e50-208">When using any autoscale solution, test it with production-level workloads well in advance.</span></span>

<span data-ttu-id="48e50-209">各 Azure サブスクリプションには、リージョンごとの VM の最大数などの、既定の制限があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-209">Each Azure subscription has default limits in place, including a maximum number of VMs per region.</span></span> <span data-ttu-id="48e50-210">サポート リクエストを提出することで、制限値を上げることができます。</span><span class="sxs-lookup"><span data-stu-id="48e50-210">You can increase the limit by filing a support request.</span></span> <span data-ttu-id="48e50-211">詳細については、「[Azure サブスクリプションとサービスの制限、クォータ、制約][subscription-limits]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="48e50-211">For more information, see [Azure subscription and service limits, quotas, and constraints][subscription-limits].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="48e50-212">可用性に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="48e50-212">Availability considerations</span></span>

<span data-ttu-id="48e50-213">仮想マシン スケール セットを使用しない場合は、同じ層の VM を可用性セットに配置します。</span><span class="sxs-lookup"><span data-stu-id="48e50-213">If you don't use virtual machine scale sets, put VMs for the same tier into an availability set.</span></span> <span data-ttu-id="48e50-214">[Azure VM の可用性 SLA][vm-sla] をサポートするために、可用性セット内に少なくとも 2 つの VM を作成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-214">Create at least two VMs in the availability set to support the [availability SLA for Azure VMs][vm-sla].</span></span> <span data-ttu-id="48e50-215">詳細については、「 [Virtual Machines の可用性管理][availability-set]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-215">For more information, see [Manage the availability of virtual machines][availability-set].</span></span> <span data-ttu-id="48e50-216">スケール セットでは "*配置グループ*" が自動的に使用されます。これは、暗黙的な可用性セットとして機能します。</span><span class="sxs-lookup"><span data-stu-id="48e50-216">Scale sets automatically use *placement groups*, which act as an implicit availability set.</span></span>

<span data-ttu-id="48e50-217">ロード バランサーは、[正常性プローブ][health-probes]を使用して VM インスタンスの可用性を監視します。</span><span class="sxs-lookup"><span data-stu-id="48e50-217">The load balancer uses [health probes][health-probes] to monitor the availability of VM instances.</span></span> <span data-ttu-id="48e50-218">タイムアウト期間内にプローブがインスタンスに到達できなかった場合、ロード バランサーはその VM へのトラフィックの送信を停止します。</span><span class="sxs-lookup"><span data-stu-id="48e50-218">If a probe can't reach an instance within a timeout period, the load balancer stops sending traffic to that VM.</span></span> <span data-ttu-id="48e50-219">ロード バランサーは引き続きプローブを行い、VM が再び使用可能になると、ロード バランサーはその VM へのトラフィックの送信を再開します。</span><span class="sxs-lookup"><span data-stu-id="48e50-219">The load balancer will continue to probe, and if the VM becomes available again, the load balancer resumes sending traffic to that VM.</span></span>

<span data-ttu-id="48e50-220">ロード バランサーの正常性プローブには、次のような推奨事項があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-220">Here are some recommendations on load balancer health probes:</span></span>

- <span data-ttu-id="48e50-221">プローブでは、HTTP または TCP のいずれかをテストできます。</span><span class="sxs-lookup"><span data-stu-id="48e50-221">Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="48e50-222">VM で HTTP サーバーを実行している場合、HTTP プローブを作成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-222">If your VMs run an HTTP server, create an HTTP probe.</span></span> <span data-ttu-id="48e50-223">それ以外の場合は、TCP プローブを作成します。</span><span class="sxs-lookup"><span data-stu-id="48e50-223">Otherwise create a TCP probe.</span></span>
- <span data-ttu-id="48e50-224">HTTP プローブでは、HTTP エンドポイントへのパスを指定します。</span><span class="sxs-lookup"><span data-stu-id="48e50-224">For an HTTP probe, specify the path to an HTTP endpoint.</span></span> <span data-ttu-id="48e50-225">プローブでは、このパスからの HTTP 200 の応答をチェックします。</span><span class="sxs-lookup"><span data-stu-id="48e50-225">The probe checks for an HTTP 200 response from this path.</span></span> <span data-ttu-id="48e50-226">これには、ルート パス ("/")、またはアプリケーションの正常性をチェックするためのカスタム ロジックを実装した正常性監視エンドポイントを指定できます。</span><span class="sxs-lookup"><span data-stu-id="48e50-226">This can be the root path ("/"), or a health-monitoring endpoint that implements some custom logic to check the health of the application.</span></span> <span data-ttu-id="48e50-227">エンドポイントでは、匿名の HTTP 要求を許可する必要があります。</span><span class="sxs-lookup"><span data-stu-id="48e50-227">The endpoint must allow anonymous HTTP requests.</span></span>
- <span data-ttu-id="48e50-228">このプローブは、[既知の IP アドレス][health-probe-ip]である 168.63.129.16 から送信されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-228">The probe is sent from a [known IP address][health-probe-ip], 168.63.129.16.</span></span> <span data-ttu-id="48e50-229">任意のファイアウォール ポリシーまたは NSG ルールで、この IP アドレスを送受信するトラフィックをブロックしていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="48e50-229">Make sure you don't block traffic to or from this IP address in any firewall policies or NSG rules.</span></span>
- <span data-ttu-id="48e50-230">[正常性プローブ ログ][health-probe-log]を使用して、正常性プローブの状態を表示します。</span><span class="sxs-lookup"><span data-stu-id="48e50-230">Use [health probe logs][health-probe-log] to view the status of the health probes.</span></span> <span data-ttu-id="48e50-231">各ロード バランサーに対して Azure Portal のログ記録を有効にします。</span><span class="sxs-lookup"><span data-stu-id="48e50-231">Enable logging in the Azure portal for each load balancer.</span></span> <span data-ttu-id="48e50-232">ログは Azure Blob Storage に書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="48e50-232">Logs are written to Azure Blob storage.</span></span> <span data-ttu-id="48e50-233">ログには、プローブの応答に失敗したために、ネットワーク トラフィックを取得していない VM 数が表示されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-233">The logs show how many VMs aren't getting network traffic because of failed probe responses.</span></span>

<span data-ttu-id="48e50-234">Cassandra クラスターの場合、フェールオーバー シナリオは、アプリケーションで使用される一貫性レベルと、レプリカの数によって異なります。</span><span class="sxs-lookup"><span data-stu-id="48e50-234">For the Cassandra cluster, the failover scenarios depend on the consistency levels used by the application and the number of replicas.</span></span> <span data-ttu-id="48e50-235">Cassandra での一貫性レベルと使用については、[データの一貫性の構成][cassandra-consistency]および [Cassandra:Quorum を使用してトークできるノードの数][cassandra-consistency-usage]に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-235">For consistency levels and usage in Cassandra, see [Configuring data consistency][cassandra-consistency] and [Cassandra: How many nodes are talked to with Quorum?][cassandra-consistency-usage]</span></span> <span data-ttu-id="48e50-236">Cassandra でのデータの可用性は、アプリケーションで使用される一貫性レベルとレプリケーション メカニズムによって決まります。</span><span class="sxs-lookup"><span data-stu-id="48e50-236">Data availability in Cassandra is determined by the consistency level used by the application and the replication mechanism.</span></span> <span data-ttu-id="48e50-237">Cassandra のレプリケーションについては、「[Data Replication in NoSQL Databases Explained][cassandra-replication]」(NoSQL Database でのデータレプリケーションの説明) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-237">For replication in Cassandra, see [Data Replication in NoSQL Databases Explained][cassandra-replication].</span></span>

## <a name="security-considerations"></a><span data-ttu-id="48e50-238">セキュリティに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="48e50-238">Security considerations</span></span>

<span data-ttu-id="48e50-239">仮想ネットワークは、Azure のトラフィックの分離境界です。</span><span class="sxs-lookup"><span data-stu-id="48e50-239">Virtual networks are a traffic isolation boundary in Azure.</span></span> <span data-ttu-id="48e50-240">ある VNet 内の VM が別の VNet 内の VM と直接通信することはできません。</span><span class="sxs-lookup"><span data-stu-id="48e50-240">VMs in one VNet can't communicate directly with VMs in a different VNet.</span></span> <span data-ttu-id="48e50-241">トラフィックを制限する[ネットワーク セキュリティ グループ][nsg] (NSG) を作成していないかぎり、同じ VNet 内の VM 同士は通信可能です。</span><span class="sxs-lookup"><span data-stu-id="48e50-241">VMs within the same VNet can communicate, unless you create [network security groups][nsg] (NSGs) to restrict traffic.</span></span> <span data-ttu-id="48e50-242">詳細については、「[Microsoft クラウド サービスとネットワーク セキュリティ][network-security]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="48e50-242">For more information, see [Microsoft cloud services and network security][network-security].</span></span>

<span data-ttu-id="48e50-243">インターネット トラフィックを受信する場合、ロード バランサーの規則でバック エンドに到達できるトラフィックを定義しています。</span><span class="sxs-lookup"><span data-stu-id="48e50-243">For incoming Internet traffic, the load balancer rules define which traffic can reach the back end.</span></span> <span data-ttu-id="48e50-244">しかし、ロード バランサーの規則では IP の安全な一覧をサポートしていないため、特定のパブリック IP アドレスを安全な一覧に追加したい場合は、NSG をサブネットに追加してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-244">However, load balancer rules don't support IP safe lists, so if you want to add certain public IP addresses to a safe list, add an NSG to the subnet.</span></span>

<span data-ttu-id="48e50-245">**DMZ**。</span><span class="sxs-lookup"><span data-stu-id="48e50-245">**DMZ**.</span></span> <span data-ttu-id="48e50-246">ネットワーク仮想アプライアンス (NVA) を追加してインターネットと Azure Virtual Network の間の DMZ を作成することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-246">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="48e50-247">NVA とは、ネットワーク関連のタスク (ファイアウォール、パケット インスペクション、監査、カスタム ルーティングなど) を実行できる仮想アプライアンスの総称です。</span><span class="sxs-lookup"><span data-stu-id="48e50-247">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="48e50-248">詳細については、[Azure とインターネットの間の DMZ の実装][dmz]に関する記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-248">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

<span data-ttu-id="48e50-249">**暗号化**。</span><span class="sxs-lookup"><span data-stu-id="48e50-249">**Encryption**.</span></span> <span data-ttu-id="48e50-250">機密の保存データを暗号化し、[Azure Key Vault][azure-key-vault] を使用してデータベース暗号化キーを管理します。</span><span class="sxs-lookup"><span data-stu-id="48e50-250">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="48e50-251">Key Vault では、ハードウェア セキュリティ モジュール (HSM) に暗号化キーを格納することができます。</span><span class="sxs-lookup"><span data-stu-id="48e50-251">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="48e50-252">データベース接続文字列などのアプリケーション シークレットも Key Vault に格納することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="48e50-252">It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="48e50-253">**DDoS 保護**。</span><span class="sxs-lookup"><span data-stu-id="48e50-253">**DDoS protection**.</span></span> <span data-ttu-id="48e50-254">Azure プラットフォームには、基本的な DDoS 保護が既定で用意されています。</span><span class="sxs-lookup"><span data-stu-id="48e50-254">The Azure platform provides basic DDoS protection by default.</span></span> <span data-ttu-id="48e50-255">この基本的な保護は、Azure インフラストラクチャ全体を保護することを目的としています。</span><span class="sxs-lookup"><span data-stu-id="48e50-255">This basic protection is targeted at protecting the Azure infrastructure as a whole.</span></span> <span data-ttu-id="48e50-256">基本的な DDoS 保護は自動的に有効になっていますが、Microsoft では [DDoS Protection Standard][ddos] を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="48e50-256">Although basic DDoS protection is automatically enabled, we recommend using [DDoS Protection Standard][ddos].</span></span> <span data-ttu-id="48e50-257">Standard Protection では、アプリケーションのネットワーク トラフィック パターンに基づいて、アダプティブ チューニングが使用され、脅威が検出されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-257">Standard protection uses adaptive tuning, based on your application's network traffic patterns, to detect threats.</span></span> <span data-ttu-id="48e50-258">これにより、インフラストラクチャ全体の DDoS ポリシーで見落とされてしまう可能性のある DDoS 攻撃に対して、軽減策を適用することができます。</span><span class="sxs-lookup"><span data-stu-id="48e50-258">This allows it to apply mitigations against DDoS attacks that might go unnoticed by the infrastructure-wide DDoS policies.</span></span> <span data-ttu-id="48e50-259">Standard Protection では、Azure Monitor を介して、アラート、テレメトリ、および分析機能も提供されます。</span><span class="sxs-lookup"><span data-stu-id="48e50-259">Standard protection also provides alerting, telemetry, and analytics through Azure Monitor.</span></span> <span data-ttu-id="48e50-260">詳細については、「[Azure DDoS Protection:ベスト プラクティスと参照アーキテクチャ][ddos-best-practices]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-260">For more information, see [Azure DDoS Protection: Best practices and reference architectures][ddos-best-practices].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="48e50-261">ソリューションのデプロイ方法</span><span class="sxs-lookup"><span data-stu-id="48e50-261">Deploy the solution</span></span>

<span data-ttu-id="48e50-262">このリファレンス アーキテクチャのデプロイについては、[GitHub][github-folder] を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-262">A deployment for this reference architecture is available on [GitHub][github-folder].</span></span>

### <a name="prerequisites"></a><span data-ttu-id="48e50-263">前提条件</span><span class="sxs-lookup"><span data-stu-id="48e50-263">Prerequisites</span></span>

[!INCLUDE [ref-arch-prerequisites.md](../../../includes/ref-arch-prerequisites.md)]

### <a name="deploy-the-solution-using-azbb"></a><span data-ttu-id="48e50-264">azbb を使用したソリューションのデプロイ</span><span class="sxs-lookup"><span data-stu-id="48e50-264">Deploy the solution using azbb</span></span>

<span data-ttu-id="48e50-265">N 層アプリケーションの参照アーキテクチャで Linux VM をデプロイするには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="48e50-265">To deploy the Linux VMs for an N-tier application reference architecture, follow these steps:</span></span>

1. <span data-ttu-id="48e50-266">上の前提条件の手順 1 で複製したリポジトリの `virtual-machines\n-tier-linux` フォルダーに移動します。</span><span class="sxs-lookup"><span data-stu-id="48e50-266">Navigate to the `virtual-machines\n-tier-linux` folder for the repository you cloned in step 1 of the pre-requisites above.</span></span>

2. <span data-ttu-id="48e50-267">このパラメーター ファイルは、デプロイ内の各 VM の既定の管理者ユーザー名とパスワードを指定します。</span><span class="sxs-lookup"><span data-stu-id="48e50-267">The parameter file specifies a default administrator user name and password for each VM in the deployment.</span></span> <span data-ttu-id="48e50-268">参照アーキテクチャをデプロイする前に、これらを変更してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-268">Change these before you deploy the reference architecture.</span></span> <span data-ttu-id="48e50-269">`n-tier-linux.json` ファイルを開き、各 **adminUsername** および **adminPassword** フィールドを新しい設定に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="48e50-269">Open the `n-tier-linux.json` file and replace each **adminUsername** and **adminPassword** field with your new settings.</span></span>   <span data-ttu-id="48e50-270">ファイルを保存します。</span><span class="sxs-lookup"><span data-stu-id="48e50-270">Save the file.</span></span>

3. <span data-ttu-id="48e50-271">次に示すように、**azbb** ツールを使用して参照アーキテクチャをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="48e50-271">Deploy the reference architecture using the **azbb** tool as shown below.</span></span>

   ```azurecli
   azbb -s <your subscription_id> -g <your resource_group_name> -l <azure region> -p n-tier-linux.json --deploy
   ```

<span data-ttu-id="48e50-272">Azure の構成要素を使用してこのサンプルの参照アーキテクチャをデプロイする方法の詳細については、「[GitHub リポジトリ][git]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="48e50-272">For more information on deploying this sample reference architecture using Azure Building Blocks, visit the [GitHub repository][git].</span></span>

<!-- links -->

[dmz]: ../dmz/secure-vnet-dmz.md
[multi-vm]: ./multi-vm.md
[naming conventions]: /azure/guidance/guidance-naming-conventions
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-linux-manage-availability
[azure-dns]: /azure/dns/dns-overview
[azure-key-vault]: https://azure.microsoft.com/services/key-vault

[要塞ホスト]: https://en.wikipedia.org/wiki/Bastion_host
[bastion host]: https://en.wikipedia.org/wiki/Bastion_host
[cassandra-in-azure]: https://academy.datastax.com/resources/deployment-guide-azure
[cassandra-consistency]: https://docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html
[cassandra-replication]: https://academy.datastax.com/planet-cassandra/data-replication-in-nosql-databases-explained
[cassandra-consistency-usage]: https://medium.com/@foundev/cassandra-how-many-nodes-are-talked-to-with-quorum-also-should-i-use-it-98074e75d7d5#.b4pb4alb2

[cidr]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[datastax]: https://www.datastax.com/products/datastax-enterprise
[ddos]: /azure/virtual-network/ddos-protection-overview
[ddos-best-practices]: /azure/security/azure-ddos-best-practices
[git]: https://github.com/mspnp/template-building-blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-linux
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[nsg-rules]: /azure/azure-resource-manager/best-practices-resource-manager-security#network-security-groups
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[パブリック IP アドレス]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[public IP address]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[visio-download]: https://archcenter.blob.core.windows.net/cdn/vm-reference-architectures.vsdx

[resource-manager-overview]: /azure/azure-resource-manager/resource-group-overview
[vmss]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview
[load-balancer]: /azure/load-balancer/load-balancer-get-started-internet-arm-cli
[load-balancer-hashing]: /azure/load-balancer/load-balancer-overview#load-balancer-features
[vmss-design]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-design-overview
[subscription-limits]: /azure/azure-subscription-service-limits
[availability-set]: /azure/virtual-machines/virtual-machines-windows-manage-availability
[health-probes]: /azure/load-balancer/load-balancer-overview#load-balancer-features
[health-probe-log]: /azure/load-balancer/load-balancer-monitor-log
[health-probe-ip]: /azure/virtual-network/virtual-networks-nsg#special-rules
[network-security]: /azure/best-practices-network-security
