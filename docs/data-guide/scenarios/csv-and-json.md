---
title: CSV ファイルと JSON ファイルの処理
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.openlocfilehash: 78d57ac4f229e863e676bf3cad0140864cd243d1
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/08/2019
ms.locfileid: "54113984"
---
# <a name="working-with-csv-and-json-files-for-data-solutions"></a>データ ソリューションでの CSV ファイルと JSON ファイルの操作

CSV と JSON は、非構造化または半構造化データの取り込み、交換、および格納を行うために使用される可能性が高い最も一般的な形式です。

## <a name="about-csv-format"></a>CSV 形式について

CSV (コンマ区切り値) ファイルは、システム間で表形式のデータをプレーン テキストで交換するときに一般的に使用されます。 通常は、データの列名を提供するヘッダー行を含みますが、それ以外は半構造化であるとみなされます。 それは、CSV では必然的に階層データまたはリレーショナル データを表すことができないという事実があるためです。 データのリレーションシップは、通常、複数の CSV ファイルによって処理され、外部キーが 1 つ以上のファイルの列に格納されますが、これらのファイル間のリレーションシップが形式自体で表されることはありません。 CSV 形式のファイルには、コンマだけでなく、タブやスペースなどの他の区切り記号も使用できます。

制約があるにもかかわらず、CSV ファイルはデータ交換用の一般的な選択肢です。その理由は、幅広いビジネス、コンシューマー、および科学アプリケーションによってサポートされているためです。 たとえば、データベースやスプレッドシート プログラムは、CSV ファイルのインポートとエクスポートを実行できます。 同様に、ほとんどのバッチおよびストリーム データ処理エンジン (Spark や Hadoop など) では、CSV 形式のファイルのシリアル化と逆シリアル化をネイティブにサポートし、読み取り時にスキーマを適用する方法を用意しています。 これにより、クエリを実行して高速処理に適した効率の良いデータ形式で情報を格納するオプションを提供することで、データを操作しやすくします。

## <a name="about-json-format"></a>JSON 形式について

JSON (JavaScript Object Notation) データは、半構造化された形式でキーと値のペアとして表されます。 JSON はしばしば XML と比較されますが、それは両方とも、データを階層形式で格納できるためであり、子データはその親を使用してインラインで表わされます。 どちらも自己記述的で人間が判読可能ですが、JSON ドキュメントのほうがはるかに小さくなる傾向があり、オンラインでのデータ交換、特に REST ベースの Web サービスで一般的に使用されます。

JSON 形式のファイルには、CSV を上回るいくつかの利点があります。

- JSON は階層構造を保持します。これにより、1 つのドキュメントに関連するデータを容易に保持でき、複雑なリレーションシップを表すことができます。
- ほとんどのプログラミング言語は、JSON のオブジェクトへの逆シリアル化をネイティブにサポートするか、軽量の JSON シリアル化ライブラリを提供しています。
- JSON では、オブジェクトのリストをサポートします。これにより、リストをリレーショナル データ モデルに変換するという面倒な作業を回避できます。
- JSON は、MongoDB、Couchbase、Azure Cosmos DB などの NoSQL データベースで一般的に使用されるファイル形式です。

ネットワーク経由で受信する大量のデータは既に JSON 形式になっているため、ほとんどの Web ベースのプログラミング言語は JSON の操作をネイティブにサポートしているか、外部ライブラリを使用して JSON データのシリアル化と逆シリアル化を実行します。 この JSON のユニバーサル サポートが、データ構造の表現による論理形式での使用、ホット データ用の交換形式、およびコールド データ用のデータ記憶域につながっています。

多くのバッチおよびストリーム データ処理エンジンは、JSON のシリアル化と逆シリアル化をネイティブにサポートします。 JSON ドキュメントに含まれるデータは、最終的にはパフォーマンスが最適化された形式 (Parquet や Avro) で保存できますが、情報ソースの生データとして機能します。これはデータを必要に応じて再処理するために重要です。

## <a name="when-to-use-csv-or-json-formats"></a>いつ CSV 形式と JSON 形式を使用するか

CSV は、データのエクスポートとインポート、または分析と機械学習向けの処理で一般的に使用されます。 JSON 形式のファイルにも同じ利点がありますが、ホット データ交換ソリューションで一般的に使用されます。 JSON ドキュメントは、多くの場合、オンライン トランザクションを実行する Web サービスとモバイル サービス、片方向または双方向通信を行う IoT (モノのインターネット) デバイス、または SaaS サービス、PaaS サービス、またはサーバーレス サービス アーキテクチャと通信するクライアントアプリケーションによって送信されます。

CSV ファイル形式と JSON ファイル形式は、どちらも、異種システムまたはデバイスの間でデータを簡単に交換できるようにします。 半構造化された形式によってほぼすべての種類のデータを柔軟に転送することができ、これらの形式のユニバーサル サポートによって簡単に使用できます。 両方とも、効率的なクエリを実行するために処理後のデータがバイナリ形式で格納されている場合でも、情報の生のソースとして使用できます。

## <a name="working-with-csv-and-json-data-in-azure"></a>Azure での CSV データと JSON データの操作

Azure では、ニーズに応じて、CSV ファイルと JSON ファイルを操作するためのさまざまなソリューションを用意しています。 これらのファイルの主な配置場所は、Azure Storage または Azure Data Lake Store です。 これらのファイルと他のテキスト ベースのファイルを操作する Azure サービスの大半は、いずれかのオブジェクト ストレージ サービスと統合します。 ただし、状況によっては、Azure SQL またはその他のデータ ストアに直接データをインポートすることを選択できます。 SQL Server は、JSON ドキュメントの格納と操作をネイティブにサポートします。これにより、[これらの種類のファイルのインポートと処理](/sql/relational-databases/json/import-json-documents-into-sql-server)を簡単に実行できます。 SQL Bulk Import などのユーティリティを使用して、[CSV ファイルのインポート](/sql/relational-databases/json/import-json-documents-into-sql-server)を簡単に実行できます。

Azure SQL にインポートせずに、Azure Blob Storage から直接 JSON ファイルにクエリを実行することもできます。 このアプローチの完全な例については、「[Work with JSON files with Azure SQL (Azure SQL を使用して JSON ファイルを操作する)](https://medium.com/@mauridb/work-with-json-files-with-azure-sql-8946f066ddd4)」を参照してください。 現時点では、このオプションは、CSV ファイルには使用できません。

シナリオに応じて、データの[バッチ処理](../big-data/batch-processing.md)または[リアルタイム処理](../big-data/real-time-processing.md)を実行できます。

## <a name="challenges"></a>課題

これらの形式を使用する際に検討するいくつかの課題があります。

- データ モデルに制限がないため、CSV ファイルと JSON ファイルは、データの破損が発生する傾向があります ("ゴミを入れるとゴミが出てくる")。 たとえば、どちらのファイルにも date/time オブジェクトの概念がありません。このため、たとえば "ABC123" の日付フィールドへの挿入がファイル形式によって禁止されることはありません。

- コールド記憶域ソリューションとして CSV ファイルと JSON ファイルを使用した場合、ビッグ データの操作で適切な拡張は行われません。 ほとんどの場合、並列処理用にパーティションに分割することはできません。バイナリ形式のように圧縮することもできません。 多くの場合、データの処理と格納が Parquet や ORC (Optimized Row Columnar) などの 読み取り用に最適化された形式で行われることになります。また、格納されているデータに関するインデックスとインライン統計も提供されます。

- クエリと分析を容易にできるように、半構造化データに関するスキーマの適用が必要になる可能性があります。 通常、環境のデータ記憶域のニーズに適合する別の形式でデータを格納する必要があります (データベース内など)。
